import{z as g,d as k,k as H,r as i,o as V,B as Y,w as u,g as f,a as o,h as M,A as E,v as I,H as O,L as R,__tla as U}from"./index-IVPz-ih6.js";import{_ as j,__tla as z}from"./Dialog.vue_vue_type_style_index_0_lang-DMbm9tVa.js";import{_ as B,__tla as L}from"./Form-C7lm0X4d.js";import{g as N,c as q,u as G,__tla as J}from"./index-CdBUcn8S.js";import{d as K,__tla as Q}from"./formatTime-C0hHcWKm.js";import{e as W,u as X,__tla as Z}from"./useCrudSchemas-DCRWJ5K2.js";import{r as e,__tla as $}from"./formRules-CA7Z-n2g.js";import{D as aa,__tla as ea}from"./dict-Dn71ph6d.js";import{u as ta,__tla as la}from"./useMessage-DmGM48R-.js";let D,p,sa=Promise.all([(()=>{try{return U}catch{}})(),(()=>{try{return z}catch{}})(),(()=>{try{return L}catch{}})(),(()=>{try{return J}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return $}catch{}})(),(()=>{try{return ea}catch{}})(),(()=>{try{return la}catch{}})()]).then(async()=>{let m,h,y,v;m=await W(),h=g({name:[e],code:[e],accountId:[e],label:[e],content:[e],params:[e],status:[e]}),y=g([{label:"\u6A21\u677F\u7F16\u7801",field:"code",isSearch:!0},{label:"\u6A21\u677F\u540D\u79F0",field:"name",isSearch:!0},{label:"\u6A21\u677F\u6807\u9898",field:"title"},{label:"\u6A21\u677F\u5185\u5BB9",field:"content",form:{component:"Editor",componentProps:{valueHtml:"",height:200}}},{label:"\u90AE\u7BB1\u8D26\u53F7",field:"accountId",width:"200px",formatter:(x,b,_)=>{var t;return(t=m.find(n=>n.id===_))==null?void 0:t.mail},search:{show:!0,component:"Select",api:()=>m,componentProps:{optionsAlias:{labelField:"mail",valueField:"id"}}},form:{component:"Select",api:()=>m,componentProps:{optionsAlias:{labelField:"mail",valueField:"id"}}}},{label:"\u53D1\u9001\u4EBA\u540D\u79F0",field:"nickname"},{label:"\u5F00\u542F\u72B6\u6001",field:"status",isSearch:!0,dictType:aa.COMMON_STATUS,dictClass:"number"},{label:"\u5907\u6CE8",field:"remark",isTable:!1},{label:"\u521B\u5EFA\u65F6\u95F4",field:"createTime",isForm:!1,formatter:K,search:{show:!0,component:"DatePicker",componentProps:{valueFormat:"YYYY-MM-DD HH:mm:ss",type:"daterange",defaultTime:[new Date("1 00:00:00"),new Date("1 23:59:59")]}}},{label:"\u64CD\u4F5C",field:"action",isForm:!1}]),{allSchemas:p}=X(y),v=k({name:"SystemMailTemplateForm"}),D=k({...v,emits:["success"],setup(x,{expose:b,emit:_}){const{t}=H(),n=ta(),l=i(!1),w=i(""),s=i(!1),S=i(""),c=i();b({open:async(r,a)=>{if(l.value=!0,w.value=t("action."+r),S.value=r,a){s.value=!0;try{const d=await N(a);c.value.setValues(d)}finally{s.value=!1}}}});const C=async()=>{if(c&&await c.value.getElFormRef().validate()){s.value=!0;try{const r=c.value.formModel;S.value==="create"?(await q(r),n.success(t("common.createSuccess"))):(await G(r),n.success(t("common.updateSuccess"))),l.value=!1,_("success")}finally{s.value=!1}}};return(r,a)=>{const d=B,F=O,P=j,A=R;return V(),Y(P,{modelValue:o(l),"onUpdate:modelValue":a[1]||(a[1]=T=>I(l)?l.value=T:null),"max-height":500,scroll:!0,title:o(w),width:800},{footer:u(()=>[f(F,{disabled:o(s),type:"primary",onClick:C},{default:u(()=>[M("\u786E \u5B9A")]),_:1},8,["disabled"]),f(F,{onClick:a[0]||(a[0]=T=>l.value=!1)},{default:u(()=>[M("\u53D6 \u6D88")]),_:1})]),default:u(()=>[E(f(d,{ref_key:"formRef",ref:c,rules:o(h),schema:o(p).formSchema},null,8,["rules","schema"]),[[A,o(s)]])]),_:1},8,["modelValue","title"])}}})});export{D as _,sa as __tla,p as a};
