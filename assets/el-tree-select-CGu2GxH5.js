import{ad as ae,ab as R,ay as H,cf as j,av as G,C as q,bI as L,am as b,d as B,M as J,aw as se,bE as oe,cg as P,bK as ne,bH as de,bp as re,ch as ce,r as Q,z as T,e as ue,b0 as U,af as ie,__tla as he}from"./index-IVPz-ih6.js";let W,pe=Promise.all([(()=>{try{return he}catch{}})()]).then(async()=>{const X=B({extends:J,setup(t,n){const r=J.setup(t,n);delete r.selectOptionClick;const p=se().proxy;return H(()=>{r.select.states.cachedOptions.get(p.value)||r.select.onOptionCreate(p)}),r},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function D(t){return t||t===0}function z(t){return Array.isArray(t)&&t.length}function K(t){return Array.isArray(t)?t:D(t)?[t]:[]}function O(t,n,r,p,d){for(let c=0;c<t.length;c++){const f=t[c];if(n(f,c,t,d))return p?p(f,c,t,d):f;{const A=r(f);if(z(A)){const V=O(A,n,r,p,f);if(V)return V}}}}function I(t,n,r,p){for(let d=0;d<t.length;d++){const c=t[d];n(c,d,t,p);const f=r(c);z(f)&&I(f,n,r,c)}}var Y=B({props:{data:{type:Array,default:()=>[]}},setup(t){const n=re(ce);return R(()=>t.data,()=>{var r;t.data.forEach(d=>{n.states.cachedOptions.has(d.value)||n.states.cachedOptions.set(d.value,d)});const p=((r=n.selectRef)==null?void 0:r.querySelectorAll("input"))||[];Array.from(p).includes(document.activeElement)||n.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const Z=B({name:"ElTreeSelect",inheritAttrs:!1,props:{...q.props,...P.props,cacheData:{type:Array,default:()=>[]}},setup(t,n){const{slots:r,expose:p}=n,d=Q(),c=Q(),f=b(()=>t.nodeKey||t.valueKey||"value"),A=((e,{attrs:C,emit:M},{select:g,tree:m,key:v})=>{const S=ae("tree-select");return R(()=>e.data,()=>{e.filterable&&H(()=>{var u,a;(a=m.value)==null||a.filter((u=g.value)==null?void 0:u.states.inputValue)})},{flush:"post"}),{...j(G(e),Object.keys(q.props)),...C,"onUpdate:modelValue":u=>M(L,u),valueKey:v,popperClass:b(()=>{const u=[S.e("popper")];return e.popperClass&&u.push(e.popperClass),u.join(" ")}),filterMethod:(u="")=>{var a;e.filterMethod?e.filterMethod(u):e.remoteMethod?e.remoteMethod(u):(a=m.value)==null||a.filter(u)}}})(t,n,{select:d,tree:c,key:f}),{cacheOptions:V,...ee}=((e,{attrs:C,slots:M,emit:g},{select:m,tree:v,key:S})=>{R(()=>e.modelValue,()=>{e.showCheckbox&&H(()=>{const l=v.value;l&&!oe(l.getCheckedKeys(),K(e.modelValue))&&l.setCheckedKeys(K(e.modelValue))})},{immediate:!0,deep:!0});const u=b(()=>({value:S.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),a=(l,s)=>{var o;const i=u.value[l];return de(i)?i(s,(o=v.value)==null?void 0:o.getNode(a("value",s))):s[i]},F=K(e.modelValue).map(l=>O(e.data||[],s=>a("value",s)===l,s=>a("children",s),(s,o,i,y)=>y&&a("value",y))).filter(l=>D(l)),te=b(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const l=[];return I(e.data.concat(e.cacheData),s=>{const o=a("value",s);l.push({value:o,currentLabel:a("label",s),isDisabled:a("disabled",s)})},s=>a("children",s)),l});return{...j(G(e),Object.keys(P.props)),...C,nodeKey:S,expandOnClickNode:b(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:b(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(F):F),renderContent:(l,{node:s,data:o,store:i})=>l(X,{value:a("value",o),label:a("label",o),disabled:a("disabled",o)},e.renderContent?()=>e.renderContent(l,{node:s,data:o,store:i}):M.default?()=>M.default({node:s,data:o,store:i}):void 0),filterNodeMethod:(l,s,o)=>e.filterNodeMethod?e.filterNodeMethod(l,s,o):!l||new RegExp(ne(l),"i").test(a("label",s)||""),onNodeClick:(l,s,o)=>{var i,y,N,x;if((i=C.onNodeClick)==null||i.call(C,l,s,o),!e.showCheckbox||!e.checkOnClickNode){if(e.showCheckbox||!e.checkStrictly&&!s.isLeaf)e.expandOnClickNode&&o.proxy.handleExpandIconClick();else if(!a("disabled",l)){const _=(y=m.value)==null?void 0:y.states.options.get(a("value",l));(N=m.value)==null||N.handleOptionSelect(_)}(x=m.value)==null||x.focus()}},onCheck:(l,s)=>{var o;if(!e.showCheckbox)return;const i=a("value",l),y={};I([v.value.store.root],h=>y[h.key]=h,h=>h.childNodes);const N=s.checkedKeys,x=e.multiple?K(e.modelValue).filter(h=>!(h in y)&&!N.includes(h)):[],_=x.concat(N);if(e.checkStrictly)g(L,e.multiple?_:_.includes(i)?i:void 0);else if(e.multiple)g(L,x.concat(v.value.getCheckedKeys(!0)));else{const h=O([l],k=>!z(a("children",k))&&!a("disabled",k),k=>a("children",k)),w=h?a("value",h):void 0,le=D(e.modelValue)&&!!O([l],k=>a("value",k)===e.modelValue,k=>a("children",k));g(L,w===e.modelValue||le?void 0:w)}H(()=>{var h;const w=K(e.modelValue);v.value.setCheckedKeys(w),(h=C.onCheck)==null||h.call(C,l,{checkedKeys:v.value.getCheckedKeys(),checkedNodes:v.value.getCheckedNodes(),halfCheckedKeys:v.value.getHalfCheckedKeys(),halfCheckedNodes:v.value.getHalfCheckedNodes()})}),(o=m.value)==null||o.focus()},cacheOptions:te}})(t,n,{select:d,tree:c,key:f}),$=T({});return p($),ue(()=>{Object.assign($,{...j(c.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...j(d.value,["focus","blur"])})}),()=>U(q,T({...A,ref:e=>d.value=e}),{...r,default:()=>[U(Y,{data:V.value}),U(P,T({...ee,ref:e=>c.value=e}))]})}});var E=ie(Z,[["__file","tree-select.vue"]]);E.install=t=>{t.component(E.name,E)},W=E});export{W as E,pe as __tla};
