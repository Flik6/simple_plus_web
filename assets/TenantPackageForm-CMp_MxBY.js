import{d as I,k as j,r as o,D as G,o as h,H as V,w as s,g as u,a,h as v,G as J,A as g,de as X,c as z,F as Q,j as W,t as Y,X as Z,J as $,c1 as ee,aT as ae,aU as le,M as te,L as se,P as ue,__tla as re}from"./index-B2l-tRNr.js";import{_ as oe,__tla as de}from"./Dialog.vue_vue_type_style_index_0_lang-DjDfdkfy.js";import{E as ne,__tla as me}from"./el-card-DXk2QVka.js";import{a as ce,D as ie,__tla as _e}from"./dict-CQ5i8MG8.js";import{C as N}from"./constants-BjZq39Lm.js";import{d as pe,h as ve}from"./tree-CxUbcu7T.js";import{a as fe,c as he,u as ye,__tla as ke}from"./index-C-oDPc5a.js";import{g as Ve,__tla as ge}from"./index-CzzdVkAj.js";import{u as be,__tla as xe}from"./useMessage-CCK8Vpo2.js";import{_ as Ce}from"./_plugin-vue_export-helper-BCo6x5W8.js";let S,we=Promise.all([(()=>{try{return re}catch{}})(),(()=>{try{return de}catch{}})(),(()=>{try{return me}catch{}})(),(()=>{try{return _e}catch{}})(),(()=>{try{return ke}catch{}})(),(()=>{try{return ge}catch{}})(),(()=>{try{return xe}catch{}})()]).then(async()=>{let b;b=I({name:"SystemTenantPackageForm"}),S=Ce(I({...b,emits:["success"],setup(Ue,{expose:A,emit:T}){const{t:y}=j(),x=be(),m=o(!1),C=o(""),c=o(!1),w=o(""),r=o({id:null,name:null,remark:null,menuIds:[],status:N.ENABLE}),q=G({name:[{required:!0,message:"\u5957\u9910\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],menuIds:[{required:!0,message:"\u5173\u8054\u7684\u83DC\u5355\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),f=o(),k=o([]),i=o(!1),n=o(),p=o(!1);A({open:async(t,e)=>{if(m.value=!0,C.value=y("action."+t),w.value=t,M(),k.value=ve(await Ve()),e){c.value=!0;try{const d=await fe(e);r.value=d,d.menuIds.forEach(_=>{n.value.setChecked(_,!0,!1)})}finally{c.value=!1}}}});const F=async()=>{if(f&&await f.value.validate()){c.value=!0;try{const t=r.value;t.menuIds=[...n.value.getCheckedKeys(!1),...n.value.getHalfCheckedKeys()],w.value==="create"?(await he(t),x.success(y("common.createSuccess"))):(await ye(t),x.success(y("common.updateSuccess"))),m.value=!1,T("success")}finally{c.value=!1}}},M=()=>{var t,e;p.value=!1,i.value=!1,r.value={id:null,name:null,remark:null,menuIds:[],status:N.ENABLE},(t=n.value)==null||t.setCheckedNodes([]),(e=f.value)==null||e.resetFields()},D=()=>{n.value.setCheckedNodes(p.value?k.value:[])},H=()=>{var e;const t=(e=n.value)==null?void 0:e.store.nodesMap;for(let d in t)t[d].expanded!==i.value&&(t[d].expanded=i.value)};return(t,e)=>{const d=Z,_=$,U=ee,K=ne,L=ae,P=le,B=te,E=se,O=oe,R=ue;return h(),V(O,{modelValue:a(m),"onUpdate:modelValue":e[6]||(e[6]=l=>g(m)?m.value=l:null),title:a(C)},{footer:s(()=>[u(E,{disabled:a(c),type:"primary",onClick:F},{default:s(()=>[v("\u786E \u5B9A")]),_:1},8,["disabled"]),u(E,{onClick:e[5]||(e[5]=l=>m.value=!1)},{default:s(()=>[v("\u53D6 \u6D88")]),_:1})]),default:s(()=>[J((h(),V(B,{ref_key:"formRef",ref:f,model:a(r),rules:a(q),"label-width":"80px"},{default:s(()=>[u(_,{label:"\u5957\u9910\u540D",prop:"name"},{default:s(()=>[u(d,{modelValue:a(r).name,"onUpdate:modelValue":e[0]||(e[0]=l=>a(r).name=l),placeholder:"\u8BF7\u8F93\u5165\u5957\u9910\u540D"},null,8,["modelValue"])]),_:1}),u(_,{label:"\u83DC\u5355\u6743\u9650"},{default:s(()=>[u(K,{class:"cardHeight"},{header:s(()=>[v(" \u5168\u9009/\u5168\u4E0D\u9009: "),u(U,{modelValue:a(p),"onUpdate:modelValue":e[1]||(e[1]=l=>g(p)?p.value=l:null),"active-text":"\u662F","inactive-text":"\u5426","inline-prompt":"",onChange:D},null,8,["modelValue"]),v(" \u5168\u90E8\u5C55\u5F00/\u6298\u53E0: "),u(U,{modelValue:a(i),"onUpdate:modelValue":e[2]||(e[2]=l=>g(i)?i.value=l:null),"active-text":"\u5C55\u5F00","inactive-text":"\u6298\u53E0","inline-prompt":"",onChange:H},null,8,["modelValue"])]),default:s(()=>[u(a(X),{ref_key:"treeRef",ref:n,data:a(k),props:a(pe),"empty-text":"\u52A0\u8F7D\u4E2D\uFF0C\u8BF7\u7A0D\u5019","node-key":"id","show-checkbox":""},null,8,["data","props"])]),_:1})]),_:1}),u(_,{label:"\u72B6\u6001",prop:"status"},{default:s(()=>[u(P,{modelValue:a(r).status,"onUpdate:modelValue":e[3]||(e[3]=l=>a(r).status=l)},{default:s(()=>[(h(!0),z(Q,null,W(a(ce)(a(ie).COMMON_STATUS),l=>(h(),V(L,{key:l.value,label:parseInt(l.value)},{default:s(()=>[v(Y(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(_,{label:"\u5907\u6CE8",prop:"remark"},{default:s(()=>[u(d,{modelValue:a(r).remark,"onUpdate:modelValue":e[4]||(e[4]=l=>a(r).remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[R,a(c)]])]),_:1},8,["modelValue","title"])}}}),[["__scopeId","data-v-0c4d4ad2"]])});export{we as __tla,S as default};
