import{dx as te,d as w,a1 as E,o as r,c as I,f as oe,t as x,g as s,w as l,F as T,_ as se,ba as re,ap as ue,k as de,r as c,D as pe,H as p,a,h as n,G as ne,j as B,i as m,A as me,aq as ie,J as ce,X as _e,c9 as fe,aU as be,b$ as ye,aT as ve,M as Ve,L as he,P as ke,__tla as ge}from"./index-06lJR0i3.js";import{_ as Ue,__tla as we}from"./Dialog.vue_vue_type_style_index_0_lang-_y4YQ6P8.js";import{_ as Se}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{E as Ae,__tla as Ne}from"./el-tree-select-DFEPc-iA.js";import{a as H,D as Y,__tla as Ee}from"./dict-CBMENT3N.js";import{a as Ie,c as xe,u as Te,g as Me,__tla as Re}from"./index-C6Ppqf9W.js";import{b as S,C as j}from"./constants-BjZq39Lm.js";import{d as qe,h as Ce}from"./tree-CxUbcu7T.js";import{u as Pe,__tla as Le}from"./useMessage-CB2pR6zL.js";let z,Oe=Promise.all([(()=>{try{return ge}catch{}})(),(()=>{try{return we}catch{}})(),(()=>{try{return Ne}catch{}})(),(()=>{try{return Ee}catch{}})(),(()=>{try{return Re}catch{}})(),(()=>{try{return Le}catch{}})()]).then(async()=>{let M,R,q,C;M=Se(te,[["__scopeId","data-v-315ff46b"]]),R=w({name:"Tooltip"}),q=w({...R,props:{titel:E.string.def(""),message:E.string.def(""),icon:E.string.def("ep:question-filled")},setup:h=>(P,L)=>{const A=se,b=re;return r(),I(T,null,[oe("span",null,x(h.titel),1),s(b,{content:h.message,placement:"top"},{default:l(()=>[s(A,{icon:h.icon,class:"ml-1px relative top-1px"},null,8,["icon"])]),_:1},8,["content"])],64)}}),C=w({name:"SystemMenuForm"}),z=w({...C,emits:["success"],setup(h,{expose:P,emit:L}){const{wsCache:A}=ue(),{t:b}=de(),k=Pe(),_=c(!1),O=c(""),f=c(!1),D=c(""),e=c({id:0,name:"",permission:"",type:S.DIR,sort:NaN,parentId:0,path:"",icon:"",component:"",componentName:"",status:j.ENABLE,visible:!0,keepAlive:!0,alwaysShow:!0}),G=pe({name:[{required:!0,message:"\u83DC\u5355\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u83DC\u5355\u987A\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],path:[{required:!0,message:"\u8DEF\u7531\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),g=c();P({open:async(u,t,U)=>{if(_.value=!0,O.value=b("action."+u),D.value=u,Q(),U&&(e.value.parentId=U),t){f.value=!0;try{e.value=await Ie(t)}finally{f.value=!1}}await K()}});const J=async()=>{if(g&&await g.value.validate()){f.value=!0;try{if((e.value.type===S.DIR||e.value.type===S.MENU)&&!X(e.value.path)){if(e.value.parentId===0&&e.value.path.charAt(0)!=="/")return void k.error("\u8DEF\u5F84\u5FC5\u987B\u4EE5 / \u5F00\u5934");if(e.value.parentId!==0&&e.value.path.charAt(0)==="/")return void k.error("\u8DEF\u5F84\u4E0D\u80FD\u4EE5 / \u5F00\u5934")}const u=e.value;D.value==="create"?(await xe(u),k.success(b("common.createSuccess"))):(await Te(u),k.success(b("common.updateSuccess"))),_.value=!1,L("success")}finally{f.value=!1,A.delete(ie.ROLE_ROUTERS)}}},N=c([]),K=async()=>{N.value=[];const u=await Me();let t={id:0,name:"\u4E3B\u7C7B\u76EE",children:[]};t.children=Ce(u),N.value.push(t)},Q=()=>{var u;e.value={id:0,name:"",permission:"",type:S.DIR,sort:NaN,parentId:0,path:"",icon:"",component:"",componentName:"",status:j.ENABLE,visible:!0,keepAlive:!0,alwaysShow:!0},(u=g.value)==null||u.resetFields()},X=u=>/^(https?:|mailto:|tel:)/.test(u);return(u,t)=>{const U=Ae,d=ce,y=_e,$=fe,v=be,W=M,V=q,Z=ye,i=ve,ee=Ve,F=he,ae=Ue,le=ke;return r(),p(ae,{modelValue:a(_),"onUpdate:modelValue":t[14]||(t[14]=o=>me(_)?_.value=o:null),title:a(O)},{footer:l(()=>[s(F,{disabled:a(f),type:"primary",onClick:J},{default:l(()=>[n("\u786E \u5B9A")]),_:1},8,["disabled"]),s(F,{onClick:t[13]||(t[13]=o=>_.value=!1)},{default:l(()=>[n("\u53D6 \u6D88")]),_:1})]),default:l(()=>[ne((r(),p(ee,{ref_key:"formRef",ref:g,model:a(e),rules:a(G),"label-width":"100px"},{default:l(()=>[s(d,{label:"\u4E0A\u7EA7\u83DC\u5355"},{default:l(()=>[s(U,{modelValue:a(e).parentId,"onUpdate:modelValue":t[0]||(t[0]=o=>a(e).parentId=o),data:a(N),"default-expanded-keys":[0],props:a(qe),"check-strictly":"","node-key":"id"},null,8,["modelValue","data","props"])]),_:1}),s(d,{label:"\u83DC\u5355\u540D\u79F0",prop:"name"},{default:l(()=>[s(y,{modelValue:a(e).name,"onUpdate:modelValue":t[1]||(t[1]=o=>a(e).name=o),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),s(d,{label:"\u83DC\u5355\u7C7B\u578B",prop:"type"},{default:l(()=>[s(v,{modelValue:a(e).type,"onUpdate:modelValue":t[2]||(t[2]=o=>a(e).type=o)},{default:l(()=>[(r(!0),I(T,null,B(a(H)(a(Y).SYSTEM_MENU_TYPE),o=>(r(),p($,{key:o.label,label:o.value},{default:l(()=>[n(x(o.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(e).type!==3?(r(),p(d,{key:0,label:"\u83DC\u5355\u56FE\u6807"},{default:l(()=>[s(W,{modelValue:a(e).icon,"onUpdate:modelValue":t[3]||(t[3]=o=>a(e).icon=o),clearable:""},null,8,["modelValue"])]),_:1})):m("",!0),a(e).type!==3?(r(),p(d,{key:1,label:"\u8DEF\u7531\u5730\u5740",prop:"path"},{label:l(()=>[s(V,{message:"\u8BBF\u95EE\u7684\u8DEF\u7531\u5730\u5740\uFF0C\u5982\uFF1A`user`\u3002\u5982\u9700\u5916\u7F51\u5730\u5740\u65F6\uFF0C\u5219\u4EE5 `http(s)://` \u5F00\u5934",titel:"\u8DEF\u7531\u5730\u5740"})]),default:l(()=>[s(y,{modelValue:a(e).path,"onUpdate:modelValue":t[4]||(t[4]=o=>a(e).path=o),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740"},null,8,["modelValue"])]),_:1})):m("",!0),a(e).type===2?(r(),p(d,{key:2,label:"\u7EC4\u4EF6\u5730\u5740",prop:"component"},{default:l(()=>[s(y,{modelValue:a(e).component,"onUpdate:modelValue":t[5]||(t[5]=o=>a(e).component=o),clearable:"",placeholder:"\u4F8B\u5982\u8BF4\uFF1Asystem/user/index"},null,8,["modelValue"])]),_:1})):m("",!0),a(e).type===2?(r(),p(d,{key:3,label:"\u7EC4\u4EF6\u540D\u5B57",prop:"componentName"},{default:l(()=>[s(y,{modelValue:a(e).componentName,"onUpdate:modelValue":t[6]||(t[6]=o=>a(e).componentName=o),clearable:"",placeholder:"\u4F8B\u5982\u8BF4\uFF1ASystemUser"},null,8,["modelValue"])]),_:1})):m("",!0),a(e).type!==1?(r(),p(d,{key:4,label:"\u6743\u9650\u6807\u8BC6",prop:"permission"},{label:l(()=>[s(V,{message:"Controller \u65B9\u6CD5\u4E0A\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasPermission('system:user:list')`)",titel:"\u6743\u9650\u6807\u8BC6"})]),default:l(()=>[s(y,{modelValue:a(e).permission,"onUpdate:modelValue":t[7]||(t[7]=o=>a(e).permission=o),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6743\u9650\u6807\u8BC6"},null,8,["modelValue"])]),_:1})):m("",!0),s(d,{label:"\u663E\u793A\u6392\u5E8F",prop:"sort"},{default:l(()=>[s(Z,{modelValue:a(e).sort,"onUpdate:modelValue":t[8]||(t[8]=o=>a(e).sort=o),min:0,clearable:"","controls-position":"right"},null,8,["modelValue"])]),_:1}),s(d,{label:"\u83DC\u5355\u72B6\u6001",prop:"status"},{default:l(()=>[s(v,{modelValue:a(e).status,"onUpdate:modelValue":t[9]||(t[9]=o=>a(e).status=o)},{default:l(()=>[(r(!0),I(T,null,B(a(H)(a(Y).COMMON_STATUS),o=>(r(),p(i,{key:o.label,label:o.value},{default:l(()=>[n(x(o.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(e).type!==3?(r(),p(d,{key:5,label:"\u663E\u793A\u72B6\u6001",prop:"visible"},{label:l(()=>[s(V,{message:"\u9009\u62E9\u9690\u85CF\u65F6\uFF0C\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE",titel:"\u663E\u793A\u72B6\u6001"})]),default:l(()=>[s(v,{modelValue:a(e).visible,"onUpdate:modelValue":t[10]||(t[10]=o=>a(e).visible=o)},{default:l(()=>[s(i,{key:"true",label:!0,border:""},{default:l(()=>[n("\u663E\u793A")]),_:1}),s(i,{key:"false",label:!1,border:""},{default:l(()=>[n("\u9690\u85CF")]),_:1})]),_:1},8,["modelValue"])]),_:1})):m("",!0),a(e).type!==3?(r(),p(d,{key:6,label:"\u603B\u662F\u663E\u793A",prop:"alwaysShow"},{label:l(()=>[s(V,{message:"\u9009\u62E9\u4E0D\u662F\u65F6\uFF0C\u5F53\u8BE5\u83DC\u5355\u53EA\u6709\u4E00\u4E2A\u5B50\u83DC\u5355\u65F6\uFF0C\u4E0D\u5C55\u793A\u81EA\u5DF1\uFF0C\u76F4\u63A5\u5C55\u793A\u5B50\u83DC\u5355",titel:"\u603B\u662F\u663E\u793A"})]),default:l(()=>[s(v,{modelValue:a(e).alwaysShow,"onUpdate:modelValue":t[11]||(t[11]=o=>a(e).alwaysShow=o)},{default:l(()=>[s(i,{key:"true",label:!0,border:""},{default:l(()=>[n("\u603B\u662F")]),_:1}),s(i,{key:"false",label:!1,border:""},{default:l(()=>[n("\u4E0D\u662F")]),_:1})]),_:1},8,["modelValue"])]),_:1})):m("",!0),a(e).type===2?(r(),p(d,{key:7,label:"\u7F13\u5B58\u72B6\u6001",prop:"keepAlive"},{label:l(()=>[s(V,{message:"\u9009\u62E9\u7F13\u5B58\u65F6\uFF0C\u5219\u4F1A\u88AB `keep-alive` \u7F13\u5B58\uFF0C\u5FC5\u987B\u586B\u5199\u300C\u7EC4\u4EF6\u540D\u79F0\u300D\u5B57\u6BB5",titel:"\u7F13\u5B58\u72B6\u6001"})]),default:l(()=>[s(v,{modelValue:a(e).keepAlive,"onUpdate:modelValue":t[12]||(t[12]=o=>a(e).keepAlive=o)},{default:l(()=>[s(i,{key:"true",label:!0,border:""},{default:l(()=>[n("\u7F13\u5B58")]),_:1}),s(i,{key:"false",label:!1,border:""},{default:l(()=>[n("\u4E0D\u7F13\u5B58")]),_:1})]),_:1},8,["modelValue"])]),_:1})):m("",!0)]),_:1},8,["model","rules"])),[[le,a(f)]])]),_:1},8,["modelValue","title"])}}})});export{z as _,Oe as __tla};
