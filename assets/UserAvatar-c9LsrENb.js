import{ac as te,aV as fi,aW as ft,aX as ga,aY as kt,d as I,ad as ee,r as Y,am as q,aZ as vi,a_ as fa,ab as bi,o as A,c as Q,ax as Wt,a as v,B as Lt,w as L,aC as va,a$ as ba,ah as ie,V as G,af as ya,ak as yi,b0 as wa,aB as wi,b1 as Bt,b2 as xi,g as k,b3 as it,h as ae,b4 as Ci,b5 as xa,$ as j,b6 as Ca,e as Ma,b7 as Da,A as ka,ar as Ba,f as ht,Y as ne,b8 as Oa,b9 as Mi,v as Sa,t as Di,i as Ot,ba as Ea,a4 as za,H as ki,__tla as Ta}from"./index-IVPz-ih6.js";import{_ as _a,__tla as Wa}from"./Dialog.vue_vue_type_style_index_0_lang-DMbm9tVa.js";import{_ as La,__tla as Na}from"./XButton-DyIlKbFt.js";import{u as Ra,__tla as Ha}from"./useMessage-DmGM48R-.js";import{_ as Bi}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{b as Ya,__tla as Aa}from"./profile-CmFpbkzc.js";let Oi,Xa=Promise.all([(()=>{try{return Ta}catch{}})(),(()=>{try{return Wa}catch{}})(),(()=>{try{return Na}catch{}})(),(()=>{try{return Ha}catch{}})(),(()=>{try{return Aa}catch{}})()]).then(async()=>{const Si=te({size:{type:[Number,String],values:fi,default:"",validator:t=>ft(t)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:ga},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:kt(String),default:"cover"}}),Ei={error:t=>t instanceof Event},zi=["src","alt","srcset"],Ti=I({name:"ElAvatar"}),_i=yi(ya(I({...Ti,props:Si,emits:Ei,setup(t,{emit:i}){const e=t,n=ee("avatar"),a=Y(!1),r=q(()=>{const{size:o,icon:d,shape:p}=e,l=[n.b()];return vi(o)&&l.push(n.m(o)),d&&l.push(n.m("icon")),p&&l.push(n.m(p)),l}),s=q(()=>{const{size:o}=e;return ft(o)?n.cssVarBlock({size:fa(o)||""}):void 0}),h=q(()=>({objectFit:e.fit}));function c(o){a.value=!0,i("error",o)}return bi(()=>e.src,()=>a.value=!1),(o,d)=>(A(),Q("span",{class:G(v(r)),style:Wt(v(s))},[!o.src&&!o.srcSet||a.value?o.icon?(A(),Lt(v(ba),{key:1},{default:L(()=>[(A(),Lt(va(o.icon)))]),_:1})):ie(o.$slots,"default",{key:2}):(A(),Q("img",{key:0,src:o.src,alt:o.alt,srcset:o.srcSet,style:Wt(v(h)),onError:c},null,44,zi))],6))}}),[["__file","avatar.vue"]])),re=I({name:"ElSpaceItem",props:te({prefixCls:{type:String}}),setup(t,{slots:i}){const e=ee("space"),n=q(()=>`${t.prefixCls||e.b()}__item`);return()=>wa("div",{class:n.value},ie(i,"default"))}}),oe={small:8,default:12,large:16},Wi=I({name:"ElSpace",props:te({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:kt([String,Object,Array]),default:""},style:{type:kt([String,Array,Object]),default:""},alignment:{type:kt(String),default:"center"},prefixCls:{type:String},spacer:{type:kt([Object,String,Number,Array]),default:null,validator:t=>xi(t)||ft(t)||vi(t)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:fi,validator:t=>ft(t)||Bt(t)&&t.length===2&&t.every(ft)}}),setup(t,{slots:i}){const{classes:e,containerStyle:n,itemStyle:a}=function(s){const h=ee("space"),c=q(()=>[h.b(),h.m(s.direction),s.class]),o=Y(0),d=Y(0),p=q(()=>[s.wrap||s.fill?{flexWrap:"wrap"}:{},{alignItems:s.alignment},{rowGap:`${d.value}px`,columnGap:`${o.value}px`},s.style]),l=q(()=>s.fill?{flexGrow:1,minWidth:`${s.fillRatio}%`}:{});return wi(()=>{const{size:m="small",wrap:f,direction:g,fill:x}=s;if(Bt(m)){const[b=0,D=0]=m;o.value=b,d.value=D}else{let b;b=ft(m)?m:oe[m||"small"]||oe.small,(f||x)&&g==="horizontal"?o.value=d.value=b:g==="horizontal"?(o.value=b,d.value=0):(d.value=b,o.value=0)}}),{classes:c,containerStyle:p,itemStyle:l}}(t);function r(s,h="",c=[]){const{prefixCls:o}=t;return s.forEach((d,p)=>{Ci(d)?Bt(d.children)&&d.children.forEach((l,m)=>{Ci(l)&&Bt(l.children)?r(l.children,`${h+m}-`,c):c.push(k(re,{style:a.value,prefixCls:o,key:`nested-${h+m}`},{default:()=>[l]},it.PROPS|it.STYLE,["style","prefixCls"]))}):xa(d)&&c.push(k(re,{style:a.value,prefixCls:o,key:`LoopKey${h+p}`},{default:()=>[d]},it.PROPS|it.STYLE,["style","prefixCls"]))}),c}return()=>{var s;const{spacer:h,direction:c}=t,o=ie(i,"default",{key:0},()=>[]);if(((s=o.children)!=null?s:[]).length===0)return null;if(Bt(o.children)){let d=r(o.children);if(h){const p=d.length-1;d=d.reduce((l,m,f)=>{const g=[...l,m];return f!==p&&g.push(k("span",{style:[a.value,c==="vertical"?"width: 100%":null],key:f},[xi(h)?h:ae(h,it.TEXT)],it.STYLE)),g},[])}return k("div",{class:e.value,style:n.value},d,it.STYLE|it.CLASS)}return o.children}}}),Li=yi(Wi);function se(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function he(t){for(var i=1;i<arguments.length;i++){var e=arguments[i]!=null?arguments[i]:{};i%2?se(Object(e),!0).forEach(function(n){Ni(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):se(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function le(t){var i=function(e,n){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,n||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}(t,"string");return typeof i=="symbol"?i:i+""}function Nt(t){return Nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Nt(t)}function ce(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,le(n.key),n)}}function Ni(t,i,e){return(i=le(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function de(t){return function(i){if(Array.isArray(i))return Rt(i)}(t)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(t)||function(i,e){if(i){if(typeof i=="string")return Rt(i,e);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rt(i,e)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Rt(t,i){(i==null||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}var St=typeof window<"u"&&window.document!==void 0,V=St?window:{},Ht=!(!St||!V.document.documentElement)&&"ontouchstart"in V.document.documentElement,Yt=!!St&&"PointerEvent"in V,B="cropper",At="all",pe="crop",ue="move",me="zoom",at="e",nt="w",lt="s",Z="n",vt="ne",bt="nw",yt="se",wt="sw",Xt="".concat(B,"-crop"),ge="".concat(B,"-disabled"),N="".concat(B,"-hidden"),fe="".concat(B,"-hide"),Ri="".concat(B,"-invisible"),Et="".concat(B,"-modal"),It="".concat(B,"-move"),xt="".concat(B,"Action"),zt="".concat(B,"Preview"),jt="crop",ve="move",be="none",Pt="crop",Ut="cropend",$t="cropmove",qt="cropstart",ye="dblclick",we=Yt?"pointerdown":Ht?"touchstart":"mousedown",xe=Yt?"pointermove":Ht?"touchmove":"mousemove",Ce=Yt?"pointerup pointercancel":Ht?"touchend touchcancel":"mouseup",Me="ready",De="resize",ke="wheel",Vt="zoom",Be="image/jpeg",Hi=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Yi=/^data:/,Ai=/^data:image\/jpeg;base64,/,Xi=/^img|canvas$/i,Oe={viewMode:0,dragMode:jt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Ii=Number.isNaN||V.isNaN;function M(t){return typeof t=="number"&&!Ii(t)}var Se=function(t){return t>0&&t<1/0};function Ft(t){return t===void 0}function rt(t){return Nt(t)==="object"&&t!==null}var ji=Object.prototype.hasOwnProperty;function ct(t){if(!rt(t))return!1;try{var i=t.constructor,e=i.prototype;return i&&e&&ji.call(e,"isPrototypeOf")}catch{return!1}}function R(t){return typeof t=="function"}var Pi=Array.prototype.slice;function Ee(t){return Array.from?Array.from(t):Pi.call(t)}function E(t,i){return t&&R(i)&&(Array.isArray(t)||M(t.length)?Ee(t).forEach(function(e,n){i.call(t,e,n,t)}):rt(t)&&Object.keys(t).forEach(function(e){i.call(t,t[e],e,t)})),t}var O=Object.assign||function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];return rt(t)&&e.length>0&&e.forEach(function(a){rt(a)&&Object.keys(a).forEach(function(r){t[r]=a[r]})}),t},Ui=/\.\d*(?:0|9){12}\d*$/;function dt(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Ui.test(t)?Math.round(t*i)/i:t}var $i=/^width|height|left|top|marginLeft|marginTop$/;function J(t,i){var e=t.style;E(i,function(n,a){$i.test(a)&&M(n)&&(n="".concat(n,"px")),e[a]=n})}function T(t,i){if(i)if(M(t.length))E(t,function(n){T(n,i)});else if(t.classList)t.classList.add(i);else{var e=t.className.trim();e?e.indexOf(i)<0&&(t.className="".concat(e," ").concat(i)):t.className=i}}function F(t,i){i&&(M(t.length)?E(t,function(e){F(e,i)}):t.classList?t.classList.remove(i):t.className.indexOf(i)>=0&&(t.className=t.className.replace(i,"")))}function pt(t,i,e){i&&(M(t.length)?E(t,function(n){pt(n,i,e)}):e?T(t,i):F(t,i))}var qi=/([a-z\d])([A-Z])/g;function Gt(t){return t.replace(qi,"$1-$2").toLowerCase()}function Kt(t,i){return rt(t[i])?t[i]:t.dataset?t.dataset[i]:t.getAttribute("data-".concat(Gt(i)))}function Ct(t,i,e){rt(e)?t[i]=e:t.dataset?t.dataset[i]=e:t.setAttribute("data-".concat(Gt(i)),e)}var ze=/\s\s*/,Te=function(){var t=!1;if(St){var i=!1,e=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,i},set:function(a){i=a}});V.addEventListener("test",e,n),V.removeEventListener("test",e,n)}return t}();function P(t,i,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=e;i.trim().split(ze).forEach(function(r){if(!Te){var s=t.listeners;s&&s[r]&&s[r][e]&&(a=s[r][e],delete s[r][e],Object.keys(s[r]).length===0&&delete s[r],Object.keys(s).length===0&&delete t.listeners)}t.removeEventListener(r,a,n)})}function X(t,i,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=e;i.trim().split(ze).forEach(function(r){if(n.once&&!Te){var s=t.listeners,h=s===void 0?{}:s;a=function(){delete h[r][e],t.removeEventListener(r,a,n);for(var c=arguments.length,o=new Array(c),d=0;d<c;d++)o[d]=arguments[d];e.apply(t,o)},h[r]||(h[r]={}),h[r][e]&&t.removeEventListener(r,h[r][e],n),h[r][e]=a,t.listeners=h}t.addEventListener(r,a,n)})}function ut(t,i,e){var n;return R(Event)&&R(CustomEvent)?n=new CustomEvent(i,{detail:e,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(i,!0,!0,e),t.dispatchEvent(n)}function _e(t){var i=t.getBoundingClientRect();return{left:i.left+(window.pageXOffset-document.documentElement.clientLeft),top:i.top+(window.pageYOffset-document.documentElement.clientTop)}}var Qt=V.location,Vi=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function We(t){var i=t.match(Vi);return i!==null&&(i[1]!==Qt.protocol||i[2]!==Qt.hostname||i[3]!==Qt.port)}function Le(t){var i="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+i}function Mt(t){var i=t.rotate,e=t.scaleX,n=t.scaleY,a=t.translateX,r=t.translateY,s=[];M(a)&&a!==0&&s.push("translateX(".concat(a,"px)")),M(r)&&r!==0&&s.push("translateY(".concat(r,"px)")),M(i)&&i!==0&&s.push("rotate(".concat(i,"deg)")),M(e)&&e!==1&&s.push("scaleX(".concat(e,")")),M(n)&&n!==1&&s.push("scaleY(".concat(n,")"));var h=s.length?s.join(" "):"none";return{WebkitTransform:h,msTransform:h,transform:h}}function Tt(t,i){var e=t.pageX,n=t.pageY,a={endX:e,endY:n};return i?a:he({startX:e,startY:n},a)}function tt(t){var i=t.aspectRatio,e=t.height,n=t.width,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",r=Se(n),s=Se(e);if(r&&s){var h=e*i;a==="contain"&&h>n||a==="cover"&&h<n?e=n/i:n=e*i}else r?e=n/i:s&&(n=e*i);return{width:n,height:e}}var Ne=String.fromCharCode,Fi=/^data:.*,/;function Gi(t){var i,e=new DataView(t);try{var n,a,r;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var s=e.byteLength,h=2;h+1<s;){if(e.getUint8(h)===255&&e.getUint8(h+1)===225){a=h;break}h+=1}if(a){var c=a+10;if(function(f,g,x){var b="";x+=g;for(var D=g;D<x;D+=1)b+=Ne(f.getUint8(D));return b}(e,a+4,4)==="Exif"){var o=e.getUint16(c);if(((n=o===18761)||o===19789)&&e.getUint16(c+2,n)===42){var d=e.getUint32(c+4,n);d>=8&&(r=c+d)}}}if(r){var p,l,m=e.getUint16(r,n);for(l=0;l<m;l+=1)if(p=r+12*l+2,e.getUint16(p,n)===274){p+=8,i=e.getUint16(p,n),e.setUint16(p,1,n);break}}}catch{i=1}return i}var Ki={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,e=this.container,n=this.cropper,a=Number(i.minContainerWidth),r=Number(i.minContainerHeight);T(n,N),F(t,N);var s={width:Math.max(e.offsetWidth,a>=0?a:200),height:Math.max(e.offsetHeight,r>=0?r:100)};this.containerData=s,J(n,{width:s.width,height:s.height}),T(t,N),F(n,N)},initCanvas:function(){var t=this.containerData,i=this.imageData,e=this.options.viewMode,n=Math.abs(i.rotate)%180==90,a=n?i.naturalHeight:i.naturalWidth,r=n?i.naturalWidth:i.naturalHeight,s=a/r,h=t.width,c=t.height;t.height*s>t.width?e===3?h=t.height*s:c=t.width/s:e===3?c=t.width/s:h=t.height*s;var o={aspectRatio:s,naturalWidth:a,naturalHeight:r,width:h,height:c};this.canvasData=o,this.limited=e===1||e===2,this.limitCanvas(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.left=(t.width-o.width)/2,o.top=(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCanvasData=O({},o)},limitCanvas:function(t,i){var e=this.options,n=this.containerData,a=this.canvasData,r=this.cropBoxData,s=e.viewMode,h=a.aspectRatio,c=this.cropped&&r;if(t){var o=Number(e.minCanvasWidth)||0,d=Number(e.minCanvasHeight)||0;s>1?(o=Math.max(o,n.width),d=Math.max(d,n.height),s===3&&(d*h>o?o=d*h:d=o/h)):s>0&&(o?o=Math.max(o,c?r.width:0):d?d=Math.max(d,c?r.height:0):c&&(o=r.width,(d=r.height)*h>o?o=d*h:d=o/h));var p=tt({aspectRatio:h,width:o,height:d});o=p.width,d=p.height,a.minWidth=o,a.minHeight=d,a.maxWidth=1/0,a.maxHeight=1/0}if(i)if(s>(c?0:1)){var l=n.width-a.width,m=n.height-a.height;a.minLeft=Math.min(0,l),a.minTop=Math.min(0,m),a.maxLeft=Math.max(0,l),a.maxTop=Math.max(0,m),c&&this.limited&&(a.minLeft=Math.min(r.left,r.left+(r.width-a.width)),a.minTop=Math.min(r.top,r.top+(r.height-a.height)),a.maxLeft=r.left,a.maxTop=r.top,s===2&&(a.width>=n.width&&(a.minLeft=Math.min(0,l),a.maxLeft=Math.max(0,l)),a.height>=n.height&&(a.minTop=Math.min(0,m),a.maxTop=Math.max(0,m))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=n.width,a.maxTop=n.height},renderCanvas:function(t,i){var e=this.canvasData,n=this.imageData;if(i){var a=function(o){var d=o.width,p=o.height,l=o.degree;if((l=Math.abs(l)%180)==90)return{width:p,height:d};var m=l%90*Math.PI/180,f=Math.sin(m),g=Math.cos(m),x=d*g+p*f,b=d*f+p*g;return l>90?{width:b,height:x}:{width:x,height:b}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),r=a.width,s=a.height,h=e.width*(r/e.naturalWidth),c=e.height*(s/e.naturalHeight);e.left-=(h-e.width)/2,e.top-=(c-e.height)/2,e.width=h,e.height=c,e.aspectRatio=r/s,e.naturalWidth=r,e.naturalHeight=s,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,J(this.canvas,O({width:e.width,height:e.height},Mt({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,e=this.imageData,n=e.naturalWidth*(i.width/i.naturalWidth),a=e.naturalHeight*(i.height/i.naturalHeight);O(e,{width:n,height:a,left:(i.width-n)/2,top:(i.height-a)/2}),J(this.image,O({width:e.width,height:e.height},Mt(O({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,a={width:i.width,height:i.height};e&&(i.height*e>i.width?a.height=a.width/e:a.width=a.height*e),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*n),a.height=Math.max(a.minHeight,a.height*n),a.left=i.left+(i.width-a.width)/2,a.top=i.top+(i.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=O({},a)},limitCropBox:function(t,i){var e=this.options,n=this.containerData,a=this.canvasData,r=this.cropBoxData,s=this.limited,h=e.aspectRatio;if(t){var c=Number(e.minCropBoxWidth)||0,o=Number(e.minCropBoxHeight)||0,d=s?Math.min(n.width,a.width,a.width+a.left,n.width-a.left):n.width,p=s?Math.min(n.height,a.height,a.height+a.top,n.height-a.top):n.height;c=Math.min(c,n.width),o=Math.min(o,n.height),h&&(c&&o?o*h>c?o=c/h:c=o*h:c?o=c/h:o&&(c=o*h),p*h>d?p=d/h:d=p*h),r.minWidth=Math.min(c,d),r.minHeight=Math.min(o,p),r.maxWidth=d,r.maxHeight=p}i&&(s?(r.minLeft=Math.max(0,a.left),r.minTop=Math.max(0,a.top),r.maxLeft=Math.min(n.width,a.left+a.width)-r.width,r.maxTop=Math.min(n.height,a.top+a.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=n.width-r.width,r.maxTop=n.height-r.height))},renderCropBox:function(){var t=this.options,i=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&Ct(this.face,xt,e.width>=i.width&&e.height>=i.height?ue:At),J(this.cropBox,O({width:e.width,height:e.height},Mt({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ut(this.element,Pt,this.getData())}},Qi={initPreview:function(){var t=this.element,i=this.crossOrigin,e=this.options.preview,n=i?this.crossOriginUrl:this.url,a=t.alt||"The image to preview",r=document.createElement("img");if(i&&(r.crossOrigin=i),r.src=n,r.alt=a,this.viewBox.appendChild(r),this.viewBoxImage=r,e){var s=e;typeof e=="string"?s=t.ownerDocument.querySelectorAll(e):e.querySelector&&(s=[e]),this.previews=s,E(s,function(h){var c=document.createElement("img");Ct(h,zt,{width:h.offsetWidth,height:h.offsetHeight,html:h.innerHTML}),i&&(c.crossOrigin=i),c.src=n,c.alt=a,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',h.innerHTML="",h.appendChild(c)})}},resetPreview:function(){E(this.previews,function(t){var i=Kt(t,zt);J(t,{width:i.width,height:i.height}),t.innerHTML=i.html,function(e,n){if(rt(e[n]))try{delete e[n]}catch{e[n]=void 0}else if(e.dataset)try{delete e.dataset[n]}catch{e.dataset[n]=void 0}else e.removeAttribute("data-".concat(Gt(n)))}(t,zt)})},preview:function(){var t=this.imageData,i=this.canvasData,e=this.cropBoxData,n=e.width,a=e.height,r=t.width,s=t.height,h=e.left-i.left-t.left,c=e.top-i.top-t.top;this.cropped&&!this.disabled&&(J(this.viewBoxImage,O({width:r,height:s},Mt(O({translateX:-h,translateY:-c},t)))),E(this.previews,function(o){var d=Kt(o,zt),p=d.width,l=d.height,m=p,f=l,g=1;n&&(f=a*(g=p/n)),a&&f>l&&(m=n*(g=l/a),f=l),J(o,{width:m,height:f}),J(o.getElementsByTagName("img")[0],O({width:r*g,height:s*g},Mt(O({translateX:-h*g,translateY:-c*g},t))))}))}},Zi={bind:function(){var t=this.element,i=this.options,e=this.cropper;R(i.cropstart)&&X(t,qt,i.cropstart),R(i.cropmove)&&X(t,$t,i.cropmove),R(i.cropend)&&X(t,Ut,i.cropend),R(i.crop)&&X(t,Pt,i.crop),R(i.zoom)&&X(t,Vt,i.zoom),X(e,we,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&X(e,ke,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&X(e,ye,this.onDblclick=this.dblclick.bind(this)),X(t.ownerDocument,xe,this.onCropMove=this.cropMove.bind(this)),X(t.ownerDocument,Ce,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&X(window,De,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,i=this.options,e=this.cropper;R(i.cropstart)&&P(t,qt,i.cropstart),R(i.cropmove)&&P(t,$t,i.cropmove),R(i.cropend)&&P(t,Ut,i.cropend),R(i.crop)&&P(t,Pt,i.crop),R(i.zoom)&&P(t,Vt,i.zoom),P(e,we,this.onCropStart),i.zoomable&&i.zoomOnWheel&&P(e,ke,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&P(e,ye,this.onDblclick),P(t.ownerDocument,xe,this.onCropMove),P(t.ownerDocument,Ce,this.onCropEnd),i.responsive&&P(window,De,this.onResize)}},Ji={resize:function(){if(!this.disabled){var t,i,e=this.options,n=this.container,a=this.containerData,r=n.offsetWidth/a.width,s=n.offsetHeight/a.height,h=Math.abs(r-1)>Math.abs(s-1)?r:s;h!==1&&(e.restore&&(t=this.getCanvasData(),i=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(E(t,function(c,o){t[o]=c*h})),this.setCropBoxData(E(i,function(c,o){i[o]=c*h}))))}},dblclick:function(){var t,i;this.disabled||this.options.dragMode===be||this.setDragMode((t=this.dragBox,i=Xt,(t.classList?t.classList.contains(i):t.className.indexOf(i)>-1)?ve:jt))},wheel:function(t){var i=this,e=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*e,t)))},cropStart:function(t){var i=t.buttons,e=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(M(i)&&i!==1||M(e)&&e!==0||t.ctrlKey))){var n,a=this.options,r=this.pointers;t.changedTouches?E(t.changedTouches,function(s){r[s.identifier]=Tt(s)}):r[t.pointerId||0]=Tt(t),n=Object.keys(r).length>1&&a.zoomable&&a.zoomOnTouch?me:Kt(t.target,xt),Hi.test(n)&&ut(this.element,qt,{originalEvent:t,action:n})!==!1&&(t.preventDefault(),this.action=n,this.cropping=!1,n===pe&&(this.cropping=!0,T(this.dragBox,Et)))}},cropMove:function(t){var i=this.action;if(!this.disabled&&i){var e=this.pointers;t.preventDefault(),ut(this.element,$t,{originalEvent:t,action:i})!==!1&&(t.changedTouches?E(t.changedTouches,function(n){O(e[n.identifier]||{},Tt(n,!0))}):O(e[t.pointerId||0]||{},Tt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var i=this.action,e=this.pointers;t.changedTouches?E(t.changedTouches,function(n){delete e[n.identifier]}):delete e[t.pointerId||0],i&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,pt(this.dragBox,Et,this.cropped&&this.options.modal)),ut(this.element,Ut,{originalEvent:t,action:i}))}}},ta={change:function(t){var i,e=this.options,n=this.canvasData,a=this.containerData,r=this.cropBoxData,s=this.pointers,h=this.action,c=e.aspectRatio,o=r.left,d=r.top,p=r.width,l=r.height,m=o+p,f=d+l,g=0,x=0,b=a.width,D=a.height,w=!0;!c&&t.shiftKey&&(c=p&&l?p/l:1),this.limited&&(g=r.minLeft,x=r.minTop,b=g+Math.min(a.width,n.width,n.left+n.width),D=x+Math.min(a.height,n.height,n.top+n.height));var y=s[Object.keys(s)[0]],u={x:y.endX-y.startX,y:y.endY-y.startY},C=function(z){switch(z){case at:m+u.x>b&&(u.x=b-m);break;case nt:o+u.x<g&&(u.x=g-o);break;case Z:d+u.y<x&&(u.y=x-d);break;case lt:f+u.y>D&&(u.y=D-f)}};switch(h){case At:o+=u.x,d+=u.y;break;case at:if(u.x>=0&&(m>=b||c&&(d<=x||f>=D))){w=!1;break}C(at),(p+=u.x)<0&&(h=nt,o-=p=-p),c&&(l=p/c,d+=(r.height-l)/2);break;case Z:if(u.y<=0&&(d<=x||c&&(o<=g||m>=b))){w=!1;break}C(Z),l-=u.y,d+=u.y,l<0&&(h=lt,d-=l=-l),c&&(p=l*c,o+=(r.width-p)/2);break;case nt:if(u.x<=0&&(o<=g||c&&(d<=x||f>=D))){w=!1;break}C(nt),p-=u.x,o+=u.x,p<0&&(h=at,o-=p=-p),c&&(l=p/c,d+=(r.height-l)/2);break;case lt:if(u.y>=0&&(f>=D||c&&(o<=g||m>=b))){w=!1;break}C(lt),(l+=u.y)<0&&(h=Z,d-=l=-l),c&&(p=l*c,o+=(r.width-p)/2);break;case vt:if(c){if(u.y<=0&&(d<=x||m>=b)){w=!1;break}C(Z),l-=u.y,d+=u.y,p=l*c}else C(Z),C(at),u.x>=0?m<b?p+=u.x:u.y<=0&&d<=x&&(w=!1):p+=u.x,u.y<=0?d>x&&(l-=u.y,d+=u.y):(l-=u.y,d+=u.y);p<0&&l<0?(h=wt,d-=l=-l,o-=p=-p):p<0?(h=bt,o-=p=-p):l<0&&(h=yt,d-=l=-l);break;case bt:if(c){if(u.y<=0&&(d<=x||o<=g)){w=!1;break}C(Z),l-=u.y,d+=u.y,p=l*c,o+=r.width-p}else C(Z),C(nt),u.x<=0?o>g?(p-=u.x,o+=u.x):u.y<=0&&d<=x&&(w=!1):(p-=u.x,o+=u.x),u.y<=0?d>x&&(l-=u.y,d+=u.y):(l-=u.y,d+=u.y);p<0&&l<0?(h=yt,d-=l=-l,o-=p=-p):p<0?(h=vt,o-=p=-p):l<0&&(h=wt,d-=l=-l);break;case wt:if(c){if(u.x<=0&&(o<=g||f>=D)){w=!1;break}C(nt),p-=u.x,o+=u.x,l=p/c}else C(lt),C(nt),u.x<=0?o>g?(p-=u.x,o+=u.x):u.y>=0&&f>=D&&(w=!1):(p-=u.x,o+=u.x),u.y>=0?f<D&&(l+=u.y):l+=u.y;p<0&&l<0?(h=vt,d-=l=-l,o-=p=-p):p<0?(h=yt,o-=p=-p):l<0&&(h=bt,d-=l=-l);break;case yt:if(c){if(u.x>=0&&(m>=b||f>=D)){w=!1;break}C(at),l=(p+=u.x)/c}else C(lt),C(at),u.x>=0?m<b?p+=u.x:u.y>=0&&f>=D&&(w=!1):p+=u.x,u.y>=0?f<D&&(l+=u.y):l+=u.y;p<0&&l<0?(h=bt,d-=l=-l,o-=p=-p):p<0?(h=wt,o-=p=-p):l<0&&(h=vt,d-=l=-l);break;case ue:this.move(u.x,u.y),w=!1;break;case me:this.zoom(function(z){var W=he({},z),_=0;return E(z,function(U,et){delete W[et],E(W,function(S){var H=Math.abs(U.startX-S.startX),Dt=Math.abs(U.startY-S.startY),ot=Math.abs(U.endX-S.endX),mt=Math.abs(U.endY-S.endY),K=Math.sqrt(H*H+Dt*Dt),gt=(Math.sqrt(ot*ot+mt*mt)-K)/K;Math.abs(gt)>Math.abs(_)&&(_=gt)})}),_}(s),t),w=!1;break;case pe:if(!u.x||!u.y){w=!1;break}i=_e(this.cropper),o=y.startX-i.left,d=y.startY-i.top,p=r.minWidth,l=r.minHeight,u.x>0?h=u.y>0?yt:vt:u.x<0&&(o-=p,h=u.y>0?wt:bt),u.y<0&&(d-=l),this.cropped||(F(this.cropBox,N),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}w&&(r.width=p,r.height=l,r.left=o,r.top=d,this.action=h,this.renderCropBox()),E(s,function(z){z.startX=z.endX,z.startY=z.endY})}},ea={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&T(this.dragBox,Et),F(this.cropBox,N),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=O({},this.initialImageData),this.canvasData=O({},this.initialCanvasData),this.cropBoxData=O({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(O(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),F(this.dragBox,Et),T(this.cropBox,N)),this},replace:function(t){var i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),i?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,E(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,F(this.cropper,ge)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,T(this.cropper,ge)),this},destroy:function(){var t=this.element;return t[B]?(t[B]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,n=e.left,a=e.top;return this.moveTo(Ft(t)?t:n+Number(t),Ft(i)?i:a+Number(i))},moveTo:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,n=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(M(t)&&(e.left=t,n=!0),M(i)&&(e.top=i,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,i){var e=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(e.width*t/e.naturalWidth,null,i)},zoomTo:function(t,i,e){var n=this.options,a=this.canvasData,r=a.width,s=a.height,h=a.naturalWidth,c=a.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var o=h*t,d=c*t;if(ut(this.element,Vt,{ratio:t,oldRatio:r/h,originalEvent:e})===!1)return this;if(e){var p=this.pointers,l=_e(this.cropper),m=p&&Object.keys(p).length?function(f){var g=0,x=0,b=0;return E(f,function(D){var w=D.startX,y=D.startY;g+=w,x+=y,b+=1}),{pageX:g/=b,pageY:x/=b}}(p):{pageX:e.pageX,pageY:e.pageY};a.left-=(o-r)*((m.pageX-l.left-a.left)/r),a.top-=(d-s)*((m.pageY-l.top-a.top)/s)}else ct(i)&&M(i.x)&&M(i.y)?(a.left-=(o-r)*((i.x-a.left)/r),a.top-=(d-s)*((i.y-a.top)/s)):(a.left-=(o-r)/2,a.top-=(d-s)/2);a.width=o,a.height=d,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return M(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,M(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(M(i)?i:1,t)},scale:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.imageData,n=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(M(t)&&(e.scaleX=t,n=!0),M(i)&&(e.scaleY=i,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.options,n=this.imageData,a=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){t={x:r.left-a.left,y:r.top-a.top,width:r.width,height:r.height};var s=n.width/n.naturalWidth;if(E(t,function(o,d){t[d]=o/s}),i){var h=Math.round(t.y+t.height),c=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=c-t.x,t.height=h-t.y}}else t={x:0,y:0,width:0,height:0};return e.rotatable&&(t.rotate=n.rotate||0),e.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var i=this.options,e=this.imageData,n=this.canvasData,a={};if(this.ready&&!this.disabled&&ct(t)){var r=!1;i.rotatable&&M(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,r=!0),i.scalable&&(M(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,r=!0),M(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var s=e.width/e.naturalWidth;M(t.x)&&(a.left=t.x*s+n.left),M(t.y)&&(a.top=t.y*s+n.top),M(t.width)&&(a.width=t.width*s),M(t.height)&&(a.height=t.height*s),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?O({},this.containerData):{}},getImageData:function(){return this.sized?O({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&E(["left","top","width","height","naturalWidth","naturalHeight"],function(e){i[e]=t[e]}),i},setCanvasData:function(t){var i=this.canvasData,e=i.aspectRatio;return this.ready&&!this.disabled&&ct(t)&&(M(t.left)&&(i.left=t.left),M(t.top)&&(i.top=t.top),M(t.width)?(i.width=t.width,i.height=t.width/e):M(t.height)&&(i.height=t.height,i.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,i=this.cropBoxData;return this.ready&&this.cropped&&(t={left:i.left,top:i.top,width:i.width,height:i.height}),t||{}},setCropBoxData:function(t){var i,e,n=this.cropBoxData,a=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ct(t)&&(M(t.left)&&(n.left=t.left),M(t.top)&&(n.top=t.top),M(t.width)&&t.width!==n.width&&(i=!0,n.width=t.width),M(t.height)&&t.height!==n.height&&(e=!0,n.height=t.height),a&&(i?n.height=n.width/a:e&&(n.width=n.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,e=function(mt,K,gt,st){var Fe=K.aspectRatio,aa=K.naturalWidth,na=K.naturalHeight,Ge=K.rotate,ra=Ge===void 0?0:Ge,Ke=K.scaleX,oa=Ke===void 0?1:Ke,Qe=K.scaleY,sa=Qe===void 0?1:Qe,Ze=gt.aspectRatio,ha=gt.naturalWidth,la=gt.naturalHeight,Je=st.fillColor,ca=Je===void 0?"transparent":Je,ti=st.imageSmoothingEnabled,da=ti===void 0||ti,ei=st.imageSmoothingQuality,pa=ei===void 0?"low":ei,ii=st.maxWidth,ai=ii===void 0?1/0:ii,ni=st.maxHeight,ri=ni===void 0?1/0:ni,oi=st.minWidth,si=oi===void 0?0:oi,hi=st.minHeight,li=hi===void 0?0:hi,_t=document.createElement("canvas"),$=_t.getContext("2d"),ci=tt({aspectRatio:Ze,width:ai,height:ri}),di=tt({aspectRatio:Ze,width:si,height:li},"cover"),Zt=Math.min(ci.width,Math.max(di.width,ha)),Jt=Math.min(ci.height,Math.max(di.height,la)),pi=tt({aspectRatio:Fe,width:ai,height:ri}),ui=tt({aspectRatio:Fe,width:si,height:li},"cover"),mi=Math.min(pi.width,Math.max(ui.width,aa)),gi=Math.min(pi.height,Math.max(ui.height,na)),ua=[-mi/2,-gi/2,mi,gi];return _t.width=dt(Zt),_t.height=dt(Jt),$.fillStyle=ca,$.fillRect(0,0,Zt,Jt),$.save(),$.translate(Zt/2,Jt/2),$.rotate(ra*Math.PI/180),$.scale(oa,sa),$.imageSmoothingEnabled=da,$.imageSmoothingQuality=pa,$.drawImage.apply($,[mt].concat(de(ua.map(function(ma){return Math.floor(dt(ma))})))),$.restore(),_t}(this.image,this.imageData,i,t);if(!this.cropped)return e;var n=this.getData(t.rounded),a=n.x,r=n.y,s=n.width,h=n.height,c=e.width/Math.floor(i.naturalWidth);c!==1&&(a*=c,r*=c,s*=c,h*=c);var o=s/h,d=tt({aspectRatio:o,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=tt({aspectRatio:o,width:t.minWidth||0,height:t.minHeight||0},"cover"),l=tt({aspectRatio:o,width:t.width||(c!==1?e.width:s),height:t.height||(c!==1?e.height:h)}),m=l.width,f=l.height;m=Math.min(d.width,Math.max(p.width,m)),f=Math.min(d.height,Math.max(p.height,f));var g=document.createElement("canvas"),x=g.getContext("2d");g.width=dt(m),g.height=dt(f),x.fillStyle=t.fillColor||"transparent",x.fillRect(0,0,m,f);var b=t.imageSmoothingEnabled,D=b===void 0||b,w=t.imageSmoothingQuality;x.imageSmoothingEnabled=D,w&&(x.imageSmoothingQuality=w);var y,u,C,z,W,_,U=e.width,et=e.height,S=a,H=r;S<=-s||S>U?(S=0,y=0,C=0,W=0):S<=0?(C=-S,S=0,W=y=Math.min(U,s+S)):S<=U&&(C=0,W=y=Math.min(s,U-S)),y<=0||H<=-h||H>et?(H=0,u=0,z=0,_=0):H<=0?(z=-H,H=0,_=u=Math.min(et,h+H)):H<=et&&(z=0,_=u=Math.min(h,et-H));var Dt=[S,H,y,u];if(W>0&&_>0){var ot=m/s;Dt.push(C*ot,z*ot,W*ot,_*ot)}return x.drawImage.apply(x,[e].concat(de(Dt.map(function(mt){return Math.floor(dt(mt))})))),g},setAspectRatio:function(t){var i=this.options;return this.disabled||Ft(t)||(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,e=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var a=t===jt,r=i.movable&&t===ve;t=a||r?t:be,i.dragMode=t,Ct(e,xt,t),pt(e,Xt,a),pt(e,It,r),i.cropBoxMovable||(Ct(n,xt,t),pt(n,Xt,a),pt(n,It,r))}return this}},ia=V.Cropper,Re=function(){function t(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(function(s,h){if(!(s instanceof h))throw new TypeError("Cannot call a class as a function")}(this,t),!a||!Xi.test(a.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=a,this.options=O({},Oe,ct(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return i=t,n=[{key:"noConflict",value:function(){return window.Cropper=ia,t}},{key:"setDefaults",value:function(a){O(Oe,ct(a)&&a)}}],(e=[{key:"init",value:function(){var a,r=this.element,s=r.tagName.toLowerCase();if(!r[B]){if(r[B]=this,s==="img"){if(this.isImg=!0,a=r.getAttribute("src")||"",this.originalUrl=a,!a)return;a=r.src}else s==="canvas"&&window.HTMLCanvasElement&&(a=r.toDataURL());this.load(a)}}},{key:"load",value:function(a){var r=this;if(a){this.url=a,this.imageData={};var s=this.element,h=this.options;if(h.rotatable||h.scalable||(h.checkOrientation=!1),h.checkOrientation&&window.ArrayBuffer)if(Yi.test(a))Ai.test(a)?this.read((c=a.replace(Fi,""),o=atob(c),d=new ArrayBuffer(o.length),E(p=new Uint8Array(d),function(f,g){p[g]=o.charCodeAt(g)}),d)):this.clone();else{var c,o,d,p,l=new XMLHttpRequest,m=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=m,l.onerror=m,l.ontimeout=m,l.onprogress=function(){l.getResponseHeader("content-type")!==Be&&l.abort()},l.onload=function(){r.read(l.response)},l.onloadend=function(){r.reloading=!1,r.xhr=null},h.checkCrossOrigin&&We(a)&&s.crossOrigin&&(a=Le(a)),l.open("GET",a,!0),l.responseType="arraybuffer",l.withCredentials=s.crossOrigin==="use-credentials",l.send()}else this.clone()}}},{key:"read",value:function(a){var r=this.options,s=this.imageData,h=Gi(a),c=0,o=1,d=1;if(h>1){this.url=function(l,m){for(var f=[],g=new Uint8Array(l);g.length>0;)f.push(Ne.apply(null,Ee(g.subarray(0,8192)))),g=g.subarray(8192);return"data:".concat(m,";base64,").concat(btoa(f.join("")))}(a,Be);var p=function(l){var m=0,f=1,g=1;switch(l){case 2:f=-1;break;case 3:m=-180;break;case 4:g=-1;break;case 5:m=90,g=-1;break;case 6:m=90;break;case 7:m=90,f=-1;break;case 8:m=-90}return{rotate:m,scaleX:f,scaleY:g}}(h);c=p.rotate,o=p.scaleX,d=p.scaleY}r.rotatable&&(s.rotate=c),r.scalable&&(s.scaleX=o,s.scaleY=d),this.clone()}},{key:"clone",value:function(){var a=this.element,r=this.url,s=a.crossOrigin,h=r;this.options.checkCrossOrigin&&We(r)&&(s||(s="anonymous"),h=Le(r)),this.crossOrigin=s,this.crossOriginUrl=h;var c=document.createElement("img");s&&(c.crossOrigin=s),c.src=h||r,c.alt=a.alt||"The image to crop",this.image=c,c.onload=this.start.bind(this),c.onerror=this.stop.bind(this),T(c,fe),a.parentNode.insertBefore(c,a.nextSibling)}},{key:"start",value:function(){var a=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var s=V.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(V.navigator.userAgent),h=function(d,p){O(a.imageData,{naturalWidth:d,naturalHeight:p,aspectRatio:d/p}),a.initialImageData=O({},a.imageData),a.sizing=!1,a.sized=!0,a.build()};if(!r.naturalWidth||s){var c=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=c,c.onload=function(){h(c.width,c.height),s||o.removeChild(c)},c.src=r.src,s||(c.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(c))}else h(r.naturalWidth,r.naturalHeight)}},{key:"stop",value:function(){var a=this.image;a.onload=null,a.onerror=null,a.parentNode.removeChild(a),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var a=this.element,r=this.options,s=this.image,h=a.parentNode,c=document.createElement("div");c.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var o=c.querySelector(".".concat(B,"-container")),d=o.querySelector(".".concat(B,"-canvas")),p=o.querySelector(".".concat(B,"-drag-box")),l=o.querySelector(".".concat(B,"-crop-box")),m=l.querySelector(".".concat(B,"-face"));this.container=h,this.cropper=o,this.canvas=d,this.dragBox=p,this.cropBox=l,this.viewBox=o.querySelector(".".concat(B,"-view-box")),this.face=m,d.appendChild(s),T(a,N),h.insertBefore(o,a.nextSibling),F(s,fe),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,T(l,N),r.guides||T(l.getElementsByClassName("".concat(B,"-dashed")),N),r.center||T(l.getElementsByClassName("".concat(B,"-center")),N),r.background&&T(o,"".concat(B,"-bg")),r.highlight||T(m,Ri),r.cropBoxMovable&&(T(m,It),Ct(m,xt,At)),r.cropBoxResizable||(T(l.getElementsByClassName("".concat(B,"-line")),N),T(l.getElementsByClassName("".concat(B,"-point")),N)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),R(r.ready)&&X(a,Me,r.ready,{once:!0}),ut(a,Me)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var a=this.cropper.parentNode;a&&a.removeChild(this.cropper),F(this.element,N)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&ce(i.prototype,e),n&&ce(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,e,n}();O(Re.prototype,Ki,Qi,Zi,Ji,ta,ea);let He,Ye,Ae,Xe,Ie,je,Pe,Ue,$e,qe,Ve;He=["alt","crossorigin","src"],Ye=I({name:"Cropper"}),Ae=I({...Ye,props:{src:j.string.def(""),alt:j.string.def(""),circled:j.bool.def(!1),realTimePreview:j.bool.def(!0),height:j.string.def("360px"),crossorigin:{type:String,default:void 0},imageStyle:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})}},emits:["cropend","ready","cropendError"],setup(t,{emit:i}){const e=t,n={aspectRatio:1,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,autoCrop:!0,background:!0,highlight:!0,center:!0,responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,scalable:!0,modal:!0,guides:!0,movable:!0,rotatable:!0},a=Ca(),r=Y(),s=Y(),h=Y(!1),{getPrefixCls:c}=ne(),o=c("cropper-image"),d=Oa(f,80),p=q(()=>({height:e.height,maxWidth:"100%",...e.imageStyle})),l=q(()=>[o,a.class,{[`${o}--circled`]:e.circled}]),m=q(()=>({height:`${e.height}`.replace(/px/,"")+"px"}));function f(){e.realTimePreview&&function(){if(!s.value)return;let g=s.value.getData();(e.circled?function(){const x=s.value.getCroppedCanvas(),b=document.createElement("canvas"),D=b.getContext("2d"),w=x.width,y=x.height;return b.width=w,b.height=y,D.imageSmoothingEnabled=!0,D.drawImage(x,0,0,w,y),D.globalCompositeOperation="destination-in",D.beginPath(),D.arc(w/2,y/2,Math.min(w,y)/2,0,2*Math.PI,!0),D.fill(),b}():s.value.getCroppedCanvas()).toBlob(x=>{if(!x)return;let b=new FileReader;b.readAsDataURL(x),b.onloadend=D=>{var w;i("cropend",{imgBase64:((w=D.target)==null?void 0:w.result)??"",imgInfo:g})},b.onerror=()=>{i("cropendError")}},"image/png")}()}return Ma(async function(){const g=v(r);g&&(s.value=new Re(g,{...n,ready:()=>{h.value=!0,f(),i("ready",s.value)},crop(){d()},zoom(){d()},cropmove(){d()},...e.options}))}),Da(()=>{var g;(g=s.value)==null||g.destroy()}),(g,x)=>(A(),Q("div",{class:G(v(l)),style:Wt(v(m))},[ka(ht("img",{ref_key:"imgElRef",ref:r,alt:t.alt,crossorigin:t.crossorigin,src:t.src,style:Wt(v(p))},null,12,He),[[Ba,v(h)]])],6))}}),Xe=["alt","src"],Ie=I({name:"CopperModal"}),je=I({...Ie,props:{srcValue:j.string.def(""),circled:j.bool.def(!0)},emits:["uploadSuccess"],setup(t,{expose:i,emit:e}){const n=t,{t:a}=Mi(),{getPrefixCls:r}=ne(),s=r("cropper-am"),h=Y(n.srcValue),c=Y(""),o=Y(),d=Y(!1);let p="",l=1,m=1;function f(w){const y=new FileReader;return y.readAsDataURL(w),h.value="",c.value="",y.onload=function(u){var C;h.value=((C=u.target)==null?void 0:C.result)??"",p=w.name},!1}function g({imgBase64:w}){c.value=w}function x(w){o.value=w}function b(w,y){var u,C;w==="scaleX"&&(l=y=l===-1?1:-1),w==="scaleY"&&(m=y=m===-1?1:-1),(C=(u=o==null?void 0:o.value)==null?void 0:u[w])==null||C.call(u,y)}async function D(){const w=(y=>{const u=y.split(","),C=u[0].match(/:(.*?);/)[1],z=window.atob(u[1]);let W=z.length;const _=new Uint8Array(W);for(;W--;)_[W]=z.charCodeAt(W);return new Blob([_],{type:C})})(c.value);e("uploadSuccess",{source:c.value,data:w,filename:p})}return i({openModal:function(){d.value=!0},closeModal:function(){d.value=!1}}),(w,y)=>{const u=La,C=Ea,z=za,W=Li,_=_i,U=ki,et=_a;return A(),Q("div",null,[k(et,{modelValue:v(d),"onUpdate:modelValue":y[7]||(y[7]=S=>Sa(d)?d.value=S:null),canFullscreen:!1,title:v(a)("cropper.modalTitle"),maxHeight:"380px",width:"800px"},{footer:L(()=>[k(U,{type:"primary",onClick:D},{default:L(()=>[ae(Di(v(a)("cropper.okText")),1)]),_:1})]),default:L(()=>[ht("div",{class:G(v(s))},[ht("div",{class:G(`${v(s)}-left`)},[ht("div",{class:G(`${v(s)}-cropper`)},[v(h)?(A(),Lt(v(Ae),{key:0,circled:t.circled,src:v(h),height:"300px",onCropend:g,onReady:x},null,8,["circled","src"])):Ot("",!0)],2),ht("div",{class:G(`${v(s)}-toolbar`)},[k(z,{beforeUpload:f,fileList:[],accept:"image/*"},{default:L(()=>[k(C,{content:v(a)("cropper.selectImage"),placement:"bottom"},{default:L(()=>[k(u,{preIcon:"ant-design:upload-outlined",type:"primary"})]),_:1},8,["content"])]),_:1}),k(W,null,{default:L(()=>[k(C,{content:v(a)("cropper.btn_reset"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"ant-design:reload-outlined",size:"small",type:"primary",onClick:y[0]||(y[0]=S=>b("reset"))},null,8,["disabled"])]),_:1},8,["content"]),k(C,{content:v(a)("cropper.btn_rotate_left"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"ant-design:rotate-left-outlined",size:"small",type:"primary",onClick:y[1]||(y[1]=S=>b("rotate",-45))},null,8,["disabled"])]),_:1},8,["content"]),k(C,{content:v(a)("cropper.btn_rotate_right"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"ant-design:rotate-right-outlined",size:"small",type:"primary",onClick:y[2]||(y[2]=S=>b("rotate",45))},null,8,["disabled"])]),_:1},8,["content"]),k(C,{content:v(a)("cropper.btn_scale_x"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"vaadin:arrows-long-h",size:"small",type:"primary",onClick:y[3]||(y[3]=S=>b("scaleX"))},null,8,["disabled"])]),_:1},8,["content"]),k(C,{content:v(a)("cropper.btn_scale_y"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"vaadin:arrows-long-v",size:"small",type:"primary",onClick:y[4]||(y[4]=S=>b("scaleY"))},null,8,["disabled"])]),_:1},8,["content"]),k(C,{content:v(a)("cropper.btn_zoom_in"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"ant-design:zoom-in-outlined",size:"small",type:"primary",onClick:y[5]||(y[5]=S=>b("zoom",.1))},null,8,["disabled"])]),_:1},8,["content"]),k(C,{content:v(a)("cropper.btn_zoom_out"),placement:"bottom"},{default:L(()=>[k(u,{disabled:!v(h),preIcon:"ant-design:zoom-out-outlined",size:"small",type:"primary",onClick:y[6]||(y[6]=S=>b("zoom",-.1))},null,8,["disabled"])]),_:1},8,["content"])]),_:1})],2)],2),ht("div",{class:G(`${v(s)}-right`)},[ht("div",{class:G(`${v(s)}-preview`)},[v(c)?(A(),Q("img",{key:0,alt:v(a)("cropper.preview"),src:v(c)},null,8,Xe)):Ot("",!0)],2),v(c)?(A(),Q("div",{key:0,class:G(`${v(s)}-group`)},[k(_,{src:v(c),size:"large"},null,8,["src"]),k(_,{size:48,src:v(c)},null,8,["src"]),k(_,{size:64,src:v(c)},null,8,["src"]),k(_,{size:80,src:v(c)},null,8,["src"])],2)):Ot("",!0)],2)],2)]),_:1},8,["modelValue","title"])])}}}),Pe=["src"],Ue=I({name:"CropperAvatar"}),$e=Bi(I({...Ue,props:{width:j.string.def("200px"),value:j.string.def(""),showBtn:j.bool.def(!0),btnText:j.string.def("")},emits:["update:value","change"],setup(t,{expose:i,emit:e}){const n=t,a=Y(n.value),{getPrefixCls:r}=ne(),s=r("cropper-avatar"),h=Ra(),{t:c}=Mi(),o=Y();function d({source:l,data:m,filename:f}){a.value=l,e("change",{source:l,data:m,filename:f}),h.success(c("cropper.uploadSuccess"))}function p(){o.value.openModal()}return wi(()=>{a.value=n.value}),bi(()=>a.value,l=>{e("update:value",l)}),i({open:p,close:function(){o.value.closeModal()}}),(l,m)=>{const f=ki;return A(),Q("div",{class:"user-info-head",onClick:m[1]||(m[1]=g=>p())},[v(a)?(A(),Q("img",{key:0,src:v(a),alt:"avatar",class:"img-circle img-lg"},null,8,Pe)):Ot("",!0),t.showBtn?(A(),Lt(f,{key:1,class:G(`${v(s)}-upload-btn`),onClick:m[0]||(m[0]=g=>p())},{default:L(()=>[ae(Di(t.btnText?t.btnText:v(c)("cropper.selectImage")),1)]),_:1},8,["class"])):Ot("",!0),k(je,{ref_key:"cropperModelRef",ref:o,srcValue:v(a),onUploadSuccess:d},null,8,["srcValue"])])}}}),[["__scopeId","data-v-9bac4689"]]),qe={class:"change-avatar"},Ve=I({name:"UserAvatar"}),Oi=Bi(I({...Ve,props:{img:j.string.def("")},setup(t){const i=t,e=q(()=>i.img),n=Y(),a=async({data:r})=>{await Ya({avatarFile:r}),n.value.close()};return(r,s)=>{const h=$e;return A(),Q("div",qe,[k(h,{ref_key:"cropperRef",ref:n,btnProps:{preIcon:"ant-design:cloud-upload-outlined"},showBtn:!1,value:v(e),width:"120px",onChange:a},null,8,["value"])])}}}),[["__scopeId","data-v-5300f6db"]])});export{Xa as __tla,Oi as default};
