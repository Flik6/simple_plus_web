import{aQ as m,d as P,k as A,r as p,z as U,aq as Q,o as k,B as x,w as i,g as t,a,h as f,A as W,v as G,T as J,D as K,aT as N,aU as X,I as Y,H as Z,L as $,__tla as ee}from"./index-IVPz-ih6.js";import{_ as ae,__tla as le}from"./Dialog.vue_vue_type_style_index_0_lang-DMbm9tVa.js";import{_ as te,__tla as oe}from"./Materials-kNxReBo4.js";import{u as ie,__tla as re}from"./useMessage-DmGM48R-.js";let q,j,E,S,se=Promise.all([(()=>{try{return ee}catch{}})(),(()=>{try{return le}catch{}})(),(()=>{try{return oe}catch{}})(),(()=>{try{return re}catch{}})()]).then(async()=>{S=async u=>await m.get({url:"/score/product/page",params:u}),j=async u=>await m.delete({url:"/score/product/delete?id="+u}),E=async u=>await m.download({url:"/score/product/export-excel",params:u}),q=P({__name:"ProductForm",emits:["success"],setup(u,{expose:I,emit:R}){const{t:_}=A(),v=ie(),c=p(!1),h=p(""),n=p(!1),w=p(""),l=p({id:void 0,title:void 0,image:void 0,images:void 0,desc:void 0,score:void 0,weigh:void 0,stock:void 0,sales:void 0,switch:void 0}),F=U({title:[{required:!0,message:"\u4EA7\u54C1\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],image:[{required:!0,message:"\u4E3B\u56FE\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],images:[{required:!0,message:"\u7EC4\u56FE\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],desc:[{required:!0,message:"\u8BE6\u60C5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],score:[{required:!0,message:"\u6D88\u8017\u79EF\u5206\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],stock:[{required:!0,message:"\u5E93\u5B58\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),H=U({autoHeightEnabled:!1,initialFrameHeight:500,initialFrameWidth:"100%",UEDITOR_HOME_URL:"/UEditor/",serverUrl:"",zIndex:9999,toolbars:[["undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","imagenone","imageleft","imageright","imagecenter"]]}),g=p();I({open:async(r,e)=>{if(c.value=!0,h.value=_("action."+r),w.value=r,B(),e){n.value=!0;try{l.value=await(async s=>await m.get({url:"/score/product/get?id="+s}))(e)}finally{n.value=!1}}}});const T=async()=>{if(g&&await g.value.validate()){n.value=!0;try{const r=l.value;w.value==="create"?(await(async e=>await m.post({url:"/score/product/create",data:e}))(r),v.success(_("common.createSuccess"))):(await(async e=>await m.put({url:"/score/product/update",data:e}))(r),v.success(_("common.updateSuccess"))),c.value=!1,R("success")}finally{n.value=!1}}},z=()=>{window.UE.registerUI("yshop",function(r,e){let s=new window.UE.ui.Dialog({iframeUrl:"/yshop/materia/index",editor:r,name:e,title:"\u4E0A\u4F20\u56FE\u7247",cssRules:"width:1200px;height:650px;padding:20px;"});return this.dialog=s,new window.UE.ui.Button({name:"dialog-button",title:"\u4E0A\u4F20\u56FE\u7247",cssRules:"background-image: url(../../../assets/imgs/icons.png);background-position: -726px -77px;",onclick:function(){s.render(),s.open()}})},37)},B=()=>{var r;l.value={id:void 0,title:void 0,image:void 0,images:void 0,desc:void 0,score:void 0,weigh:void 0,stock:void 0,sales:void 0,switch:void 0},(r=g.value)==null||r.resetFields()};return(r,e)=>{const s=J,d=K,y=te,D=Q("vue-ueditor-wrap"),b=N,C=X,L=Y,V=Z,M=ae,O=$;return k(),x(M,{title:a(h),modelValue:a(c),"onUpdate:modelValue":e[9]||(e[9]=o=>G(c)?c.value=o:null),width:"60%"},{footer:i(()=>[t(V,{onClick:T,type:"primary",disabled:a(n)},{default:i(()=>[f("\u786E \u5B9A")]),_:1},8,["disabled"]),t(V,{onClick:e[8]||(e[8]=o=>c.value=!1)},{default:i(()=>[f("\u53D6 \u6D88")]),_:1})]),default:i(()=>[W((k(),x(L,{ref_key:"formRef",ref:g,model:a(l),rules:a(F),"label-width":"100px"},{default:i(()=>[t(d,{label:"\u4EA7\u54C1\u6807\u9898",prop:"title"},{default:i(()=>[t(s,{modelValue:a(l).title,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).title=o),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u6807\u9898"},null,8,["modelValue"])]),_:1}),t(d,{label:"\u4E3B\u56FE",prop:"image"},{default:i(()=>[t(y,{modelValue:a(l).image,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).image=o),num:"1",type:"image"},null,8,["modelValue"])]),_:1}),t(d,{label:"\u7EC4\u56FE",prop:"images"},{default:i(()=>[t(y,{modelValue:a(l).images,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).images=o),num:"5",type:"image"},null,8,["modelValue"])]),_:1}),t(d,{label:"\u8BE6\u60C5",prop:"desc"},{default:i(()=>[t(D,{modelValue:a(l).desc,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).desc=o),config:a(H),onBeforeInit:z,style:{width:"90%"}},null,8,["modelValue","config"])]),_:1}),t(d,{label:"\u6D88\u8017\u79EF\u5206",prop:"score"},{default:i(()=>[t(s,{modelValue:a(l).score,"onUpdate:modelValue":e[4]||(e[4]=o=>a(l).score=o),placeholder:"\u8BF7\u8F93\u5165\u6D88\u8017\u79EF\u5206"},null,8,["modelValue"])]),_:1}),t(d,{label:"\u5E93\u5B58",prop:"stock"},{default:i(()=>[t(s,{modelValue:a(l).stock,"onUpdate:modelValue":e[5]||(e[5]=o=>a(l).stock=o),placeholder:"\u8BF7\u8F93\u5165\u5E93\u5B58"},null,8,["modelValue"])]),_:1}),t(d,{label:"\u6743\u91CD",prop:"weigh"},{default:i(()=>[t(s,{modelValue:a(l).weigh,"onUpdate:modelValue":e[6]||(e[6]=o=>a(l).weigh=o),placeholder:"\u8BF7\u8F93\u5165\u6743\u91CD"},null,8,["modelValue"])]),_:1}),t(d,{label:"\u662F\u5426\u4E0A\u67B6",prop:"isSwitch"},{default:i(()=>[t(C,{modelValue:a(l).isSwitch,"onUpdate:modelValue":e[7]||(e[7]=o=>a(l).isSwitch=o)},{default:i(()=>[t(b,{label:1},{default:i(()=>[f("\u4E0A\u67B6")]),_:1}),t(b,{label:0},{default:i(()=>[f("\u4E0B\u67B6")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[O,a(n)]])]),_:1},8,["title","modelValue"])}}})});export{q as _,se as __tla,j as d,E as e,S as g};
