import{d as g,r as _,z as F,o as i,B as f,w as s,g as u,a as t,h as P,A as M,c as D,F as S,j as T,v as z,D as A,T as B,I as H,H as I,L,__tla as R}from"./index-IVPz-ih6.js";import{_ as E,__tla as G}from"./Dialog.vue_vue_type_style_index_0_lang-DMbm9tVa.js";import{_ as J,__tla as K}from"./style.css_vue_type_style_index_0_src_true_lang-Cy3MdGP3.js";import{g as N,s as O,__tla as Q}from"./index-CdBUcn8S.js";import{u as W,__tla as X}from"./useMessage-DmGM48R-.js";let b,Y=Promise.all([(()=>{try{return R}catch{}})(),(()=>{try{return G}catch{}})(),(()=>{try{return K}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return X}catch{}})()]).then(async()=>{let v;v=g({name:"SystemMailTemplateSendForm"}),b=g({...v,setup(Z,{expose:V}){const w=W(),p=_(!1),d=_(!1),e=_({content:"",params:{},mail:"",templateCode:"",templateParams:new Map}),c=F({mail:[{required:!0,message:"\u90AE\u7BB1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],templateCode:[{required:!0,message:"\u6A21\u7248\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],templateParams:{}}),n=_();V({open:async m=>{p.value=!0,x(),d.value=!0;try{const a=await N(m);e.value.content=a.content,e.value.params=a.params,e.value.templateCode=a.code,e.value.templateParams=a.params.reduce((o,r)=>(o[r]="",o),{}),c.templateParams=a.params.reduce((o,r)=>(o[r]={required:!0,message:"\u53C2\u6570 "+r+" \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},o),{})}finally{d.value=!1}}});const C=async()=>{if(n&&await n.value.validate()){d.value=!0;try{const m=e.value,a=await O(m);a&&w.success("\u63D0\u4EA4\u53D1\u9001\u6210\u529F\uFF01\u53D1\u9001\u7ED3\u679C\uFF0C\u89C1\u53D1\u9001\u65E5\u5FD7\u7F16\u53F7\uFF1A"+a),p.value=!1}finally{d.value=!1}}},x=()=>{var m;e.value={content:"",params:{},mail:"",templateCode:"",templateParams:new Map},c.templateParams={},(m=n.value)==null||m.resetFields()};return(m,a)=>{const o=J,r=A,y=B,k=H,h=I,U=E,j=L;return i(),f(U,{modelValue:t(p),"onUpdate:modelValue":a[2]||(a[2]=l=>z(p)?p.value=l:null),title:"\u6D4B\u8BD5"},{footer:s(()=>[u(h,{disabled:t(d),type:"primary",onClick:C},{default:s(()=>[P("\u786E \u5B9A")]),_:1},8,["disabled"]),u(h,{onClick:a[1]||(a[1]=l=>p.value=!1)},{default:s(()=>[P("\u53D6 \u6D88")]),_:1})]),default:s(()=>[M((i(),f(k,{ref_key:"formRef",ref:n,model:t(e),rules:t(c),"label-width":"120px"},{default:s(()=>[u(r,{label:"\u6A21\u677F\u5185\u5BB9",prop:"content"},{default:s(()=>[u(o,{"model-value":t(e).content,height:"150px",readonly:""},null,8,["model-value"])]),_:1}),u(r,{label:"\u6536\u4EF6\u90AE\u7BB1",prop:"mail"},{default:s(()=>[u(y,{modelValue:t(e).mail,"onUpdate:modelValue":a[0]||(a[0]=l=>t(e).mail=l),placeholder:"\u8BF7\u8F93\u5165\u6536\u4EF6\u90AE\u7BB1"},null,8,["modelValue"])]),_:1}),(i(!0),D(S,null,T(t(e).params,l=>(i(),f(r,{key:l,label:"\u53C2\u6570 {"+l+"}",prop:"templateParams."+l},{default:s(()=>[u(y,{modelValue:t(e).templateParams[l],"onUpdate:modelValue":q=>t(e).templateParams[l]=q,placeholder:"\u8BF7\u8F93\u5165 "+l+" \u53C2\u6570"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"]))),128))]),_:1},8,["model","rules"])),[[j,t(d)]])]),_:1},8,["modelValue"])}}})});export{b as _,Y as __tla};
