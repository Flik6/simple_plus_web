import{d as w,a1 as i,bX as q,r as m,cl as I,a2 as W,bY as A,o as r,c as f,g as d,w as X,a as o,n as B,f as s,ai as z,H as F,i as H,a6 as P,F as Y,t as _,aR as D,k as G,_ as J,__tla as K}from"./index-06lJR0i3.js";import{E as L,__tla as N}from"./el-image-viewer-Ba7yM8TQ.js";import{u as O,__tla as Q}from"./useMessage-CB2pR6zL.js";import{_ as Z}from"./_plugin-vue_export-helper-BCo6x5W8.js";let x,aa=Promise.all([(()=>{try{return K}catch{}})(),(()=>{try{return N}catch{}})(),(()=>{try{return Q}catch{}})()]).then(async()=>{let g,h,y,v,b;g={class:"upload-box"},h=["src"],y={key:1,class:"upload-empty"},v={class:"el-upload__tip"},b=w({name:"UploadImg"}),x=Z(w({...b,props:{modelValue:i.string.def(""),updateUrl:i.string.def("https://nq.92coco.cn:8443/admin-api/infra/file/upload"),drag:i.bool.def(!0),disabled:i.bool.def(!1),fileSize:i.number.def(5),fileType:i.array.def(["image/jpeg","image/png","image/gif"]),height:i.string.def("150px"),width:i.string.def("150px"),borderRadius:i.string.def("8px")},emits:["update:modelValue"],setup(e,{emit:k}){const c=e;q(a=>({"2e74e5ba":e.width,f34e509a:e.height,"29a7296a":e.borderRadius}));const{t:p}=G(),n=O(),V=m("id-"+I()),u=m(!1),C=()=>{k("update:modelValue","")},$=m({Authorization:"Bearer "+W(),"tenant-id":A()}),E=()=>{const a=document.querySelector(`#${V.value} .el-upload__input`);a&&a.dispatchEvent(new MouseEvent("click"))},S=a=>{const l=a.size/1024/1024<c.fileSize,t=c.fileType;return t.includes(a.type)||n.notifyWarning("\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01"),l||n.notifyWarning(`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${c.fileSize}M\uFF01`),t.includes(a.type)&&l},M=a=>{n.success("\u4E0A\u4F20\u6210\u529F"),k("update:modelValue",a.data)},R=()=>{n.notifyError("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01")};return(a,l)=>{const t=J,T=P,U=L;return r(),f("div",g,[d(T,{action:e.updateUrl,id:o(V),class:B(["upload",e.drag?"no-border":""]),multiple:!1,"show-file-list":!1,headers:o($),"before-upload":S,"on-success":M,"on-error":R,drag:e.drag,accept:e.fileType.join(",")},{default:X(()=>[e.modelValue?(r(),f(Y,{key:0},[s("img",{src:e.modelValue,class:"upload-image"},null,8,h),s("div",{class:"upload-handle",onClick:l[1]||(l[1]=D(()=>{},["stop"]))},[s("div",{class:"handle-icon",onClick:E},[d(t,{icon:"ep:edit"}),s("span",null,_(o(p)("action.edit")),1)]),s("div",{class:"handle-icon",onClick:l[0]||(l[0]=j=>u.value=!0)},[d(t,{icon:"ep:zoom-in"}),s("span",null,_(o(p)("action.detail")),1)]),s("div",{class:"handle-icon",onClick:C},[d(t,{icon:"ep:delete"}),s("span",null,_(o(p)("action.del")),1)])])],64)):(r(),f("div",y,[z(a.$slots,"empty",{},()=>[d(t,{icon:"ep:plus"})],!0)]))]),_:3},8,["action","id","class","headers","drag","accept"]),s("div",v,[z(a.$slots,"tip",{},void 0,!0)]),o(u)?(r(),F(U,{key:0,onClose:l[2]||(l[2]=j=>u.value=!1),"url-list":[e.modelValue]},null,8,["url-list"])):H("",!0)])}}}),[["__scopeId","data-v-c91e3a42"]])});export{x as _,aa as __tla};
