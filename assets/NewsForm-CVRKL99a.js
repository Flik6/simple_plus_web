import{a0 as ne,bW as oe,d as se,bp as ie,am as D,r as re,o as u,B as y,w as n,g as e,f as m,c as C,F as ue,j as ce,a,V as G,t as J,i as p,v as de,_ as me,H as pe,n as _e,a3 as he,T as ve,m as fe,a7 as ge,a1 as ye,q as Ce,s as we,__tla as ke}from"./index-IVPz-ih6.js";import{_ as Ve,__tla as Ue}from"./style.css_vue_type_style_index_0_src_true_lang-Cy3MdGP3.js";import{u as K,__tla as be}from"./useMessage-DmGM48R-.js";import Se,{__tla as Fe}from"./CoverSelect-BzTP9GSI.js";import{_ as xe}from"./_plugin-vue_export-helper-BCo6x5W8.js";let b,L,Q,ze=Promise.all([(()=>{try{return ke}catch{}})(),(()=>{try{return Ue}catch{}})(),(()=>{try{return be}catch{}})(),(()=>{try{return Fe}catch{}})()]).then(async()=>{let V,S,F,x,z,N,I,O,P,M,j,A,B,E,T,q,W;V=K(),S=(h,U)=>({MENU_CONF:{uploadImage:{server:h,maxFileSize:5242880,maxNumberOfFiles:10,allowedFileTypes:["image/*"],meta:{accountId:U,type:"image"},metaWithUrl:!0,headers:{Accept:"*",Authorization:"Bearer "+ne(),"tenant-id":oe()},withCredentials:!0,timeout:5e3,fieldName:"file",onBeforeUpload:c=>c,onProgress(c){},onSuccess(c,_){},onFailed(c,_){V.alertError(_.message)},onError(c,_,H){V.alertError(_.message)},customInsert(c,_){_(c.data.url,"image",c.data.url)}}}}),Q=()=>({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),F={class:"select-item"},x=["onClick"],z={class:"news-content"},N=["src"],I={class:"news-content-title"},O={key:0,class:"child"},P=["onClick"],M={class:"news-content-item"},j={class:"news-content-item-title"},A={class:"news-content-item-img"},B=["src"],E={class:"child"},T={key:0},q=(h=>(Ce("data-v-5d891ef8"),h=h(),we(),h))(()=>m("p",null,"\u6458\u8981:",-1)),W=se({__name:"NewsForm",props:{isCreating:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(h,{emit:U}){const c=h,_=K(),H=ie("accountId"),R=S("https://nq.92coco.cn:8443/admin-api/mp/material/upload-permanent",H),l=D({get:()=>c.modelValue===null?[{title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}]:c.modelValue,set(o){U("update:modelValue",o)}}),d=re(0),r=D(()=>l.value[d.value]),X=o=>{const s=l.value[o];l.value[o]=l.value[o+1],l.value[o+1]=s,d.value=o+1},Y=async o=>{try{await _.confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u56FE\u6587\u5417?"),l.value.splice(o,1),d.value===o&&(d.value=0)}catch{}},$=()=>{l.value.push({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),d.value=l.value.length-1};return(o,s)=>{const f=me,g=pe,w=_e,ee=he,k=ve,Z=fe,ae=ge,le=ye;return u(),y(le,null,{default:n(()=>[e(ee,{width:"40%"},{default:n(()=>[m("div",F,[(u(!0),C(ue,null,ce(a(l),(t,i)=>(u(),C("div",{key:i},[i===0?(u(),C("div",{key:0,class:G(["news-main father",{activeAddNews:a(d)===i}]),onClick:v=>d.value=i},[m("div",z,[m("img",{class:"material-img",src:t.thumbUrl},null,8,N),m("div",I,J(t.title),1)]),a(l).length>1?(u(),C("div",O,[e(g,{type:"info",circle:"",size:"small",onClick:()=>X(i)},{default:n(()=>[e(f,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"]),o.isCreating?(u(),y(g,{key:0,type:"danger",circle:"",size:"small",onClick:()=>Y(i)},{default:n(()=>[e(f,{icon:"ep:delete"})]),_:2},1032,["onClick"])):p("",!0)])):p("",!0)],10,x)):p("",!0),i>0?(u(),C("div",{key:1,class:G(["news-main-item father",{activeAddNews:a(d)===i}]),onClick:v=>d.value=i},[m("div",M,[m("div",j,J(t.title),1),m("div",A,[m("img",{class:"material-img",src:t.thumbUrl,width:"100%"},null,8,B)])]),m("div",E,[a(l).length>i+1?(u(),y(g,{key:0,circle:"",type:"info",size:"small",onClick:()=>X(i)},{default:n(()=>[e(f,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"])):p("",!0),i>0?(u(),y(g,{key:1,type:"info",circle:"",size:"small",onClick:()=>(v=>{const te=l.value[v];l.value[v]=l.value[v-1],l.value[v-1]=te,d.value=v-1})(i)},{default:n(()=>[e(f,{icon:"ep:arrow-up-bold"})]),_:2},1032,["onClick"])):p("",!0),o.isCreating?(u(),y(g,{key:2,type:"danger",size:"small",circle:"",onClick:()=>Y(i)},{default:n(()=>[e(f,{icon:"ep:delete"})]),_:2},1032,["onClick"])):p("",!0)])],10,P)):p("",!0)]))),128)),e(w,{justify:"center",class:"ope-row"},{default:n(()=>[a(l).length<8&&o.isCreating?(u(),y(g,{key:0,type:"primary",circle:"",onClick:$},{default:n(()=>[e(f,{icon:"ep:plus"})]),_:1})):p("",!0)]),_:1})])]),_:1}),e(ae,null,{default:n(()=>[a(l).length>0?(u(),C("div",T,[e(w,{gutter:20},{default:n(()=>[e(k,{modelValue:a(r).title,"onUpdate:modelValue":s[0]||(s[0]=t=>a(r).title=t),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898\uFF08\u5FC5\u586B\uFF09"},null,8,["modelValue"]),e(k,{modelValue:a(r).author,"onUpdate:modelValue":s[1]||(s[1]=t=>a(r).author=t),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005",style:{"margin-top":"5px"}},null,8,["modelValue"]),e(k,{modelValue:a(r).contentSourceUrl,"onUpdate:modelValue":s[2]||(s[2]=t=>a(r).contentSourceUrl=t),placeholder:"\u8BF7\u8F93\u5165\u539F\u6587\u5730\u5740",style:{"margin-top":"5px"}},null,8,["modelValue"])]),_:1}),e(w,{gutter:20},{default:n(()=>[e(Z,{span:12},{default:n(()=>[e(Se,{modelValue:a(r),"onUpdate:modelValue":s[3]||(s[3]=t=>de(r)?r.value=t:null),"is-first":a(d)===0},null,8,["modelValue","is-first"])]),_:1}),e(Z,{span:12},{default:n(()=>[q,e(k,{rows:8,type:"textarea",modelValue:a(r).digest,"onUpdate:modelValue":s[4]||(s[4]=t=>a(r).digest=t),placeholder:"\u8BF7\u8F93\u5165\u6458\u8981",class:"digest",maxlength:"120"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,null,{default:n(()=>[e(a(Ve),{modelValue:a(r).content,"onUpdate:modelValue":s[5]||(s[5]=t=>a(r).content=t),"editor-config":a(R)},null,8,["modelValue","editor-config"])]),_:1})])):p("",!0)]),_:1})]),_:1})}}}),b=xe(W,[["__scopeId","data-v-5d891ef8"]]),L=Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"}))});export{b as N,ze as __tla,L as a,Q as c};
