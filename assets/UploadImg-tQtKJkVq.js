import{d as w,$ as s,bV as q,r as m,ck as B,a0 as I,bW as M,o as r,c as f,g as d,w as F,a as o,V as A,f as t,ah as z,B as P,i as D,a4 as G,F as H,t as _,aR as J,k as K,_ as L,__tla as N}from"./index-IVPz-ih6.js";import{E as O,__tla as Q}from"./el-image-viewer-CT2z8sww.js";import{u as X,__tla as Y}from"./useMessage-DmGM48R-.js";import{_ as Z}from"./_plugin-vue_export-helper-BCo6x5W8.js";let x,aa=Promise.all([(()=>{try{return N}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return Y}catch{}})()]).then(async()=>{let g,h,y,v,b;g={class:"upload-box"},h=["src"],y={key:1,class:"upload-empty"},v={class:"el-upload__tip"},b=w({name:"UploadImg"}),x=Z(w({...b,props:{modelValue:s.string.def(""),updateUrl:s.string.def("https://nq.92coco.cn:8443/admin-api/infra/file/upload"),drag:s.bool.def(!0),disabled:s.bool.def(!1),fileSize:s.number.def(5),fileType:s.array.def(["image/jpeg","image/png","image/gif"]),height:s.string.def("150px"),width:s.string.def("150px"),borderRadius:s.string.def("8px")},emits:["update:modelValue"],setup(e,{emit:k}){const c=e;q(a=>({"2e74e5ba":e.width,f34e509a:e.height,"29a7296a":e.borderRadius}));const{t:p}=K(),n=X(),V=m("id-"+B()),u=m(!1),C=()=>{k("update:modelValue","")},S=m({Authorization:"Bearer "+I(),"tenant-id":M()}),$=()=>{const a=document.querySelector(`#${V.value} .el-upload__input`);a&&a.dispatchEvent(new MouseEvent("click"))},E=a=>{const l=a.size/1024/1024<c.fileSize,i=c.fileType;return i.includes(a.type)||n.notifyWarning("\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01"),l||n.notifyWarning(`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${c.fileSize}M\uFF01`),i.includes(a.type)&&l},R=a=>{n.success("\u4E0A\u4F20\u6210\u529F"),k("update:modelValue",a.data)},T=()=>{n.notifyError("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01")};return(a,l)=>{const i=L,U=G,W=O;return r(),f("div",g,[d(U,{action:e.updateUrl,id:o(V),class:A(["upload",e.drag?"no-border":""]),multiple:!1,"show-file-list":!1,headers:o(S),"before-upload":E,"on-success":R,"on-error":T,drag:e.drag,accept:e.fileType.join(",")},{default:F(()=>[e.modelValue?(r(),f(H,{key:0},[t("img",{src:e.modelValue,class:"upload-image"},null,8,h),t("div",{class:"upload-handle",onClick:l[1]||(l[1]=J(()=>{},["stop"]))},[t("div",{class:"handle-icon",onClick:$},[d(i,{icon:"ep:edit"}),t("span",null,_(o(p)("action.edit")),1)]),t("div",{class:"handle-icon",onClick:l[0]||(l[0]=j=>u.value=!0)},[d(i,{icon:"ep:zoom-in"}),t("span",null,_(o(p)("action.detail")),1)]),t("div",{class:"handle-icon",onClick:C},[d(i,{icon:"ep:delete"}),t("span",null,_(o(p)("action.del")),1)])])],64)):(r(),f("div",y,[z(a.$slots,"empty",{},()=>[d(i,{icon:"ep:plus"})],!0)]))]),_:3},8,["action","id","class","headers","drag","accept"]),t("div",v,[z(a.$slots,"tip",{},void 0,!0)]),o(u)?(r(),P(W,{key:0,onClose:l[2]||(l[2]=j=>u.value=!1),"url-list":[e.modelValue]},null,8,["url-list"])):D("",!0)])}}}),[["__scopeId","data-v-c91e3a42"]])});export{x as _,aa as __tla};
