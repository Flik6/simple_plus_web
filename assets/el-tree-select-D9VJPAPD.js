import{ae,ac as j,az as D,cg as H,aw as U,I as q,bK as L,an as b,d as B,Q as $,ax as se,bG as oe,ch as G,bM as ne,bJ as de,bs as re,ci as ce,bh as ue,r as F,D as J,e as ie,b0 as P,ag as he,__tla as pe}from"./index-DkWBYEPi.js";let W,ve=Promise.all([(()=>{try{return pe}catch{}})()]).then(async()=>{const X=B({extends:$,setup(t,d){const r=$.setup(t,d);delete r.selectOptionClick;const p=se().proxy;return D(()=>{r.select.states.cachedOptions.get(p.value)||r.select.onOptionCreate(p)}),j(()=>d.attrs.visible,n=>{r.states.visible=n},{immediate:!0}),r},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function z(t){return t||t===0}function I(t){return Array.isArray(t)&&t.length}function K(t){return Array.isArray(t)?t:z(t)?[t]:[]}function O(t,d,r,p,n){for(let c=0;c<t.length;c++){const v=t[c];if(d(v,c,t,n))return p?p(v,c,t,n):v;{const E=r(v);if(I(E)){const V=O(E,d,r,p,v);if(V)return V}}}}function R(t,d,r,p){for(let n=0;n<t.length;n++){const c=t[n];d(c,n,t,p);const v=r(c);I(v)&&R(v,d,r,c)}}var Y=B({props:{data:{type:Array,default:()=>[]}},setup(t){const d=re(ce);return j(()=>t.data,()=>{var r;t.data.forEach(n=>{d.states.cachedOptions.has(n.value)||d.states.cachedOptions.set(n.value,n)});const p=((r=d.selectRef)==null?void 0:r.querySelectorAll("input"))||[];ue&&!Array.from(p).includes(document.activeElement)&&d.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const Z=B({name:"ElTreeSelect",inheritAttrs:!1,props:{...q.props,...G.props,cacheData:{type:Array,default:()=>[]}},setup(t,d){const{slots:r,expose:p}=d,n=F(),c=F(),v=b(()=>t.nodeKey||t.valueKey||"value"),E=((e,{attrs:C,emit:M},{select:g,tree:m,key:f})=>{const S=ae("tree-select");return j(()=>e.data,()=>{e.filterable&&D(()=>{var u,a;(a=m.value)==null||a.filter((u=g.value)==null?void 0:u.states.inputValue)})},{flush:"post"}),{...H(U(e),Object.keys(q.props)),...C,"onUpdate:modelValue":u=>M(L,u),valueKey:f,popperClass:b(()=>{const u=[S.e("popper")];return e.popperClass&&u.push(e.popperClass),u.join(" ")}),filterMethod:(u="")=>{var a;e.filterMethod?e.filterMethod(u):e.remoteMethod?e.remoteMethod(u):(a=m.value)==null||a.filter(u)}}})(t,d,{select:n,tree:c,key:v}),{cacheOptions:V,...ee}=((e,{attrs:C,slots:M,emit:g},{select:m,tree:f,key:S})=>{j(()=>e.modelValue,()=>{e.showCheckbox&&D(()=>{const l=f.value;l&&!oe(l.getCheckedKeys(),K(e.modelValue))&&l.setCheckedKeys(K(e.modelValue))})},{immediate:!0,deep:!0});const u=b(()=>({value:S.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),a=(l,s)=>{var o;const i=u.value[l];return de(i)?i(s,(o=f.value)==null?void 0:o.getNode(a("value",s))):s[i]},T=K(e.modelValue).map(l=>O(e.data||[],s=>a("value",s)===l,s=>a("children",s),(s,o,i,y)=>y&&a("value",y))).filter(l=>z(l)),te=b(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const l=[];return R(e.data.concat(e.cacheData),s=>{const o=a("value",s);l.push({value:o,currentLabel:a("label",s),isDisabled:a("disabled",s)})},s=>a("children",s)),l});return{...H(U(e),Object.keys(G.props)),...C,nodeKey:S,expandOnClickNode:b(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:b(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(T):T),renderContent:(l,{node:s,data:o,store:i})=>l(X,{value:a("value",o),label:a("label",o),disabled:a("disabled",o),visible:s.visible},e.renderContent?()=>e.renderContent(l,{node:s,data:o,store:i}):M.default?()=>M.default({node:s,data:o,store:i}):void 0),filterNodeMethod:(l,s,o)=>e.filterNodeMethod?e.filterNodeMethod(l,s,o):!l||new RegExp(ne(l),"i").test(a("label",s)||""),onNodeClick:(l,s,o)=>{var i,y,N,x;if((i=C.onNodeClick)==null||i.call(C,l,s,o),!e.showCheckbox||!e.checkOnClickNode){if(e.showCheckbox||!e.checkStrictly&&!s.isLeaf)e.expandOnClickNode&&o.proxy.handleExpandIconClick();else if(!a("disabled",l)){const _=(y=m.value)==null?void 0:y.states.options.get(a("value",l));(N=m.value)==null||N.handleOptionSelect(_)}(x=m.value)==null||x.focus()}},onCheck:(l,s)=>{var o;if(!e.showCheckbox)return;const i=a("value",l),y={};R([f.value.store.root],h=>y[h.key]=h,h=>h.childNodes);const N=s.checkedKeys,x=e.multiple?K(e.modelValue).filter(h=>!(h in y)&&!N.includes(h)):[],_=x.concat(N);if(e.checkStrictly)g(L,e.multiple?_:_.includes(i)?i:void 0);else if(e.multiple)g(L,x.concat(f.value.getCheckedKeys(!0)));else{const h=O([l],k=>!I(a("children",k))&&!a("disabled",k),k=>a("children",k)),w=h?a("value",h):void 0,le=z(e.modelValue)&&!!O([l],k=>a("value",k)===e.modelValue,k=>a("children",k));g(L,w===e.modelValue||le?void 0:w)}D(()=>{var h;const w=K(e.modelValue);f.value.setCheckedKeys(w),(h=C.onCheck)==null||h.call(C,l,{checkedKeys:f.value.getCheckedKeys(),checkedNodes:f.value.getCheckedNodes(),halfCheckedKeys:f.value.getHalfCheckedKeys(),halfCheckedNodes:f.value.getHalfCheckedNodes()})}),(o=m.value)==null||o.focus()},cacheOptions:te}})(t,d,{select:n,tree:c,key:v}),Q=J({});return p(Q),ie(()=>{Object.assign(Q,{...H(c.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...H(n.value,["focus","blur"])})}),()=>P(q,J({...E,ref:e=>n.value=e}),{...r,default:()=>[P(Y,{data:V.value}),P(G,J({...ee,ref:e=>c.value=e}))]})}});var A=he(Z,[["__file","tree-select.vue"]]);A.install=t=>{t.component(A.name,A)},W=A});export{W as E,ve as __tla};
