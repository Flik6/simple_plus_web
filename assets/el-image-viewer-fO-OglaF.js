import{cp as pe,bb as be,ad as ge,aY as j,ce as ke,aW as G,d as H,cq as q,cr as _e,cs as we,bx as xe,ae as ye,ct as ze,r as I,cu as Ie,cj as he,an as w,ac as K,az as Ce,e as Ne,o as N,H as U,g as i,w as p,f as m,n as f,a,ay as Z,aR as Oe,i as O,a$ as k,cv as Te,c as X,F as J,cw as Ae,cx as Re,cy as Ee,cz as Le,aD as Ye,cA as Se,cB as Xe,j as $e,G as Be,as as De,ai as Fe,$ as We,cC as Me,ag as Pe,cD as R,bw as h,cE as Ve,al as je,__tla as Ge}from"./index-DPXDMqGw.js";let Q,He=Promise.all([(()=>{try{return Ge}catch{}})()]).then(async()=>{function E(b,T,v){var x=!0,n=!0;if(typeof b!="function")throw new TypeError("Expected a function");return pe(v)&&(x="leading"in v?!!v.leading:x,n="trailing"in v?!!v.trailing:n),be(b,T,{leading:x,maxWait:T,trailing:n})}const ee=ge({urlList:{type:j(Array),default:()=>ke([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:j(String)}}),ae={close:()=>!0,switch:b=>G(b),rotate:b=>G(b)},se=["src","crossorigin"],ne=H({name:"ElImageViewer"});Q=je(Pe(H({...ne,props:ee,emits:ae,setup(b,{expose:T,emit:v}){var x;const n=b,C={CONTAIN:{name:"contain",icon:q(_e)},ORIGINAL:{name:"original",icon:q(we)}},{t:le}=xe(),l=ye("image-viewer"),{nextZIndex:te}=ze(),L=I(),$=I([]),B=Ie(),y=I(!0),g=I(n.initialIndex),A=he(C.CONTAIN),t=I({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),oe=I((x=n.zIndex)!=null?x:te()),ie=w(()=>{const{urlList:e}=n;return e.length<=1}),D=w(()=>g.value===0),F=w(()=>g.value===n.urlList.length-1),ce=w(()=>n.urlList[g.value]),ue=w(()=>[l.e("btn"),l.e("prev"),l.is("disabled",!n.infinite&&D.value)]),re=w(()=>[l.e("btn"),l.e("next"),l.is("disabled",!n.infinite&&F.value)]),de=w(()=>{const{scale:e,deg:s,offsetX:o,offsetY:u,enableTransition:c}=t.value;let r=o/e,d=u/e;switch(s%360){case 90:case-270:[r,d]=[d,-r];break;case 180:case-180:[r,d]=[-r,-d];break;case 270:case-90:[r,d]=[-d,r]}const z={transform:`scale(${e}) rotate(${s}deg) translate(${r}px, ${d}px)`,transition:c?"transform .3s":""};return A.value.name===C.CONTAIN.name&&(z.maxWidth=z.maxHeight="100%"),z});function Y(){B.stop(),v("close")}function fe(){y.value=!1}function ve(e){y.value=!1,e.target.alt=le("el.image.error")}function me(e){if(y.value||e.button!==0||!L.value)return;t.value.enableTransition=!1;const{offsetX:s,offsetY:o}=t.value,u=e.pageX,c=e.pageY,r=E(z=>{t.value={...t.value,offsetX:s+z.pageX-u,offsetY:o+z.pageY-c}}),d=R(document,"mousemove",r);R(document,"mouseup",()=>{d()}),e.preventDefault()}function W(){t.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function M(){if(y.value)return;const e=Ve(C),s=Object.values(C),o=A.value.name,u=(s.findIndex(c=>c.name===o)+1)%e.length;A.value=C[e[u]],W()}function S(e){const s=n.urlList.length;g.value=(e+s)%s}function P(){D.value&&!n.infinite||S(g.value-1)}function V(){F.value&&!n.infinite||S(g.value+1)}function _(e,s={}){if(y.value)return;const{minScale:o,maxScale:u}=n,{zoomRate:c,rotateDeg:r,enableTransition:d}={zoomRate:n.zoomRate,rotateDeg:90,enableTransition:!0,...s};switch(e){case"zoomOut":t.value.scale>o&&(t.value.scale=Number.parseFloat((t.value.scale/c).toFixed(3)));break;case"zoomIn":t.value.scale<u&&(t.value.scale=Number.parseFloat((t.value.scale*c).toFixed(3)));break;case"clockwise":t.value.deg+=r,v("rotate",t.value.deg);break;case"anticlockwise":t.value.deg-=r,v("rotate",t.value.deg)}t.value.enableTransition=d}return K(ce,()=>{Ce(()=>{const e=$.value[0];e!=null&&e.complete||(y.value=!0)})}),K(g,e=>{W(),v("switch",e)}),Ne(()=>{var e,s;(function(){const o=E(c=>{switch(c.code){case h.esc:n.closeOnPressEscape&&Y();break;case h.space:M();break;case h.left:P();break;case h.up:_("zoomIn");break;case h.right:V();break;case h.down:_("zoomOut")}}),u=E(c=>{_((c.deltaY||c.deltaX)<0?"zoomIn":"zoomOut",{zoomRate:n.zoomRate,enableTransition:!1})});B.run(()=>{R(document,"keydown",o),R(document,"wheel",u)})})(),(s=(e=L.value)==null?void 0:e.focus)==null||s.call(e)}),T({setActiveItem:S}),(e,s)=>(N(),U(Me,{to:"body",disabled:!e.teleported},[i(We,{name:"viewer-fade",appear:""},{default:p(()=>[m("div",{ref_key:"wrapper",ref:L,tabindex:-1,class:f(a(l).e("wrapper")),style:Z({zIndex:oe.value})},[m("div",{class:f(a(l).e("mask")),onClick:s[0]||(s[0]=Oe(o=>e.hideOnClickModal&&Y(),["self"]))},null,2),O(" CLOSE "),m("span",{class:f([a(l).e("btn"),a(l).e("close")]),onClick:Y},[i(a(k),null,{default:p(()=>[i(a(Te))]),_:1})],2),O(" ARROW "),a(ie)?O("v-if",!0):(N(),X(J,{key:0},[m("span",{class:f(a(ue)),onClick:P},[i(a(k),null,{default:p(()=>[i(a(Ae))]),_:1})],2),m("span",{class:f(a(re)),onClick:V},[i(a(k),null,{default:p(()=>[i(a(Re))]),_:1})],2)],64)),O(" ACTIONS "),m("div",{class:f([a(l).e("btn"),a(l).e("actions")])},[m("div",{class:f(a(l).e("actions__inner"))},[i(a(k),{onClick:s[1]||(s[1]=o=>_("zoomOut"))},{default:p(()=>[i(a(Ee))]),_:1}),i(a(k),{onClick:s[2]||(s[2]=o=>_("zoomIn"))},{default:p(()=>[i(a(Le))]),_:1}),m("i",{class:f(a(l).e("actions__divider"))},null,2),i(a(k),{onClick:M},{default:p(()=>[(N(),U(Ye(a(A).icon)))]),_:1}),m("i",{class:f(a(l).e("actions__divider"))},null,2),i(a(k),{onClick:s[3]||(s[3]=o=>_("anticlockwise"))},{default:p(()=>[i(a(Se))]),_:1}),i(a(k),{onClick:s[4]||(s[4]=o=>_("clockwise"))},{default:p(()=>[i(a(Xe))]),_:1})],2)],2),O(" CANVAS "),m("div",{class:f(a(l).e("canvas"))},[(N(!0),X(J,null,$e(e.urlList,(o,u)=>Be((N(),X("img",{ref_for:!0,ref:c=>$.value[u]=c,key:o,src:o,style:Z(a(de)),class:f(a(l).e("img")),crossorigin:e.crossorigin,onLoad:fe,onError:ve,onMousedown:me},null,46,se)),[[De,u===g.value]])),128))],2),Fe(e.$slots,"default")],6)]),_:3})],8,["disabled"]))}}),[["__file","image-viewer.vue"]]))});export{Q as E,He as __tla};
