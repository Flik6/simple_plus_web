import{d as V,k as S,r as n,o as i,B as c,w as t,g as r,a as l,h as b,A as B,c as D,F as H,j as M,v as L,T as P,D as T,M as q,C as z,I as E,H as G,L as J,__tla as K}from"./index-IVPz-ih6.js";import{_ as N,__tla as O}from"./Dialog.vue_vue_type_style_index_0_lang-DMbm9tVa.js";import{c as Q,d as W,__tla as X}from"./index-BGUT0iQU.js";import{b as Y,__tla as Z}from"./index-B8i17Mbo.js";import{u as $,__tla as ee}from"./useMessage-DmGM48R-.js";let k,ae=Promise.all([(()=>{try{return K}catch{}})(),(()=>{try{return O}catch{}})(),(()=>{try{return X}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return ee}catch{}})()]).then(async()=>{let v;v=V({name:"SystemUserAssignRoleForm"}),k=V({...v,emits:["success"],setup(le,{expose:h,emit:I}){const{t:w}=S(),U=$(),d=n(!1),o=n(!1),e=n({id:void 0,nickname:"",username:"",roleIds:[]}),m=n(),f=n([]);h({open:async u=>{d.value=!0,C(),e.value.id=u.id,e.value.username=u.username,e.value.nickname=u.nickname,o.value=!0;try{e.value.roleIds=await Q(u.id)}finally{o.value=!1}f.value=await Y()}});const x=async()=>{if(m&&await m.value.validate()){o.value=!0;try{await W({userId:e.value.id,roleIds:e.value.roleIds}),U.success(w("common.updateSuccess")),d.value=!1,I("success",!0)}finally{o.value=!1}}},C=()=>{var u;e.value={id:void 0,nickname:"",username:"",roleIds:[]},(u=m.value)==null||u.resetFields()};return(u,s)=>{const p=P,_=T,g=q,F=z,j=E,y=G,A=N,R=J;return i(),c(A,{modelValue:l(d),"onUpdate:modelValue":s[4]||(s[4]=a=>L(d)?d.value=a:null),title:"\u5206\u914D\u89D2\u8272"},{footer:t(()=>[r(y,{disabled:l(o),type:"primary",onClick:x},{default:t(()=>[b("\u786E \u5B9A")]),_:1},8,["disabled"]),r(y,{onClick:s[3]||(s[3]=a=>d.value=!1)},{default:t(()=>[b("\u53D6 \u6D88")]),_:1})]),default:t(()=>[B((i(),c(j,{ref_key:"formRef",ref:m,model:l(e),"label-width":"80px"},{default:t(()=>[r(_,{label:"\u7528\u6237\u540D\u79F0"},{default:t(()=>[r(p,{modelValue:l(e).username,"onUpdate:modelValue":s[0]||(s[0]=a=>l(e).username=a),disabled:!0},null,8,["modelValue"])]),_:1}),r(_,{label:"\u7528\u6237\u6635\u79F0"},{default:t(()=>[r(p,{modelValue:l(e).nickname,"onUpdate:modelValue":s[1]||(s[1]=a=>l(e).nickname=a),disabled:!0},null,8,["modelValue"])]),_:1}),r(_,{label:"\u89D2\u8272"},{default:t(()=>[r(F,{modelValue:l(e).roleIds,"onUpdate:modelValue":s[2]||(s[2]=a=>l(e).roleIds=a),multiple:"",placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272"},{default:t(()=>[(i(!0),D(H,null,M(l(f),a=>(i(),c(g,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[R,l(o)]])]),_:1},8,["modelValue"])}}})});export{k as _,ae as __tla};
