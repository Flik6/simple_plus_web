import{d as G,D as O,r as n,o,c as _,F as g,j as b,H as I,w as a,f,t as d,g as e,h as v,i as Q,L as X,Q as z,I as A,J as B,X as K,M as W,__tla as Y}from"./index-06lJR0i3.js";import{E as Z,__tla as $}from"./el-card-jxTvgqU7.js";import{E as ee,__tla as ae}from"./el-image-TBZORFLL.js";import{__tla as te}from"./el-image-viewer-Ba7yM8TQ.js";import{S as le,__tla as re}from"./SelectStoreProduct-P19or4AC.js";import{_ as oe}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{__tla as ue}from"./Dialog.vue_vue_type_style_index_0_lang-_y4YQ6P8.js";import{__tla as se}from"./index-CKi29HNj.js";import{__tla as de}from"./CateTree.vue_vue_type_script_name_StoreProductCateTree_setup_true_lang-BrTQG1oi.js";import{__tla as me}from"./category-D6I56tcn.js";import"./tree-CxUbcu7T.js";let P,_e=Promise.all([(()=>{try{return Y}catch{}})(),(()=>{try{return $}catch{}})(),(()=>{try{return ae}catch{}})(),(()=>{try{return te}catch{}})(),(()=>{try{return re}catch{}})(),(()=>{try{return ue}catch{}})(),(()=>{try{return se}catch{}})(),(()=>{try{return de}catch{}})(),(()=>{try{return me}catch{}})()]).then(async()=>{let k,V,w,C;k={style:{width:"100%"}},V={style:{display:"flex","flex-direction":"row"}},w={class:"card-container"},C={key:0},P=oe(G({__name:"ComboInfo",emits:["update-combos"],setup(ce,{expose:D,emit:x}){const F=O({attrName:[{required:!0,message:"\u5E97\u94FA\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],optionalNum:[{required:!0,message:"\u5957\u9910\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],combos:[{required:!0,message:"\u5957\u9910\u5546\u54C1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),u=n([]),c=n(),t=n({attrName:"",optionalNum:void 0,products:[]}),U=n(),L=()=>{U.value.openDialog("\u9009\u62E9\u5546\u54C1",{specType:0})},M=s=>{s.forEach(r=>{r.hasOwnProperty("productNum")||(r.productNum=1)}),t.value.products=s};D({resetComboList:()=>{u.value=[]}});const R=async()=>{var s;c.value&&await c.value.validate()&&(u.value.push({...t.value}),x("update-combos",u.value),t.value={attrName:"",optionalNum:void 0,products:[]},(s=c.value)==null||s.resetFields())};return(s,r)=>{const y=X,j=ee,H=z,J=A,p=B,h=Z,q=K,S=W;return o(),_("div",k,[(o(!0),_(g,null,b(u.value,(l,E)=>(o(),I(h,{style:{width:"100%"},key:E},{header:a(()=>[f("div",V,[f("div",null,"\u5C5E\u6027\uFF1A"+d(l.attrName)+" - "+d(l.products.length)+" \u9009 "+d(l.optionalNum),1),e(y,{onClick:m=>(N=>{u.value.splice(N,1),x("update-combos",u.value)})(E)},{default:a(()=>[v("\u5220\u9664")]),_:2},1032,["onClick"])])]),default:a(()=>[f("div",w,[(o(!0),_(g,null,b(l.products,(m,N)=>(o(),I(h,{key:N,class:"card-item"},{default:a(()=>[f("div",null,d(m.storeName),1),e(j,{src:m.image,class:"card-image",fit:"cover"},null,8,["src"]),e(p,{label:"\u5546\u54C1\u4EFD\u6570"},{default:a(()=>[e(J,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u4EFD\u6570",modelValue:m.productNum,"onUpdate:modelValue":i=>m.productNum=i},{default:a(()=>[(o(),_(g,null,b(10,(i,T)=>e(H,{key:T,value:i},{default:a(()=>[v(d(i),1)]),_:2},1032,["value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024))),128)),e(h,{style:{width:"100%"}},{default:a(()=>[e(S,{ref_key:"formRef",ref:c,model:t.value,rules:F,"label-width":"150px"},{default:a(()=>[e(p,{label:"\u5957\u9910\u5C5E\u6027\u540D\u79F0",prop:"attrName"},{default:a(()=>[e(q,{modelValue:t.value.attrName,"onUpdate:modelValue":r[0]||(r[0]=l=>t.value.attrName=l),placeholder:"\u8BF7\u8F93\u5165\u5957\u9910\u5C5E\u6027\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(p,{label:"\u53EF\u9009\u6570\u91CF",prop:"optionalNum"},{default:a(()=>[e(q,{modelValue:t.value.optionalNum,"onUpdate:modelValue":r[1]||(r[1]=l=>t.value.optionalNum=l),modelModifiers:{number:!0},placeholder:"\u8BF7\u8F93\u5165\u5C5E\u6027\u53EF\u9009\u6570\u91CF"},null,8,["modelValue"])]),_:1}),e(p,{label:"\u5957\u9910\u5185\u5BB9",prop:"products"},{default:a(()=>[e(y,{type:"primary",onClick:L},{default:a(()=>[v("\u6DFB\u52A0\u5546\u54C1")]),_:1}),t.value.products.length>0?(o(),_("span",C,d(t.value.products.length)+"\u4E2A\u5546\u54C1",1)):Q("",!0)]),_:1})]),_:1},8,["model","rules"]),e(y,{type:"primary",onClick:R},{default:a(()=>[v("\u786E\u5B9A\u6DFB\u52A0")]),_:1})]),_:1}),e(le,{ref_key:"selectProductRef",ref:U,onSelected:M},null,512)])}}}),[["__scopeId","data-v-4e225f0d"]])});export{_e as __tla,P as default};
